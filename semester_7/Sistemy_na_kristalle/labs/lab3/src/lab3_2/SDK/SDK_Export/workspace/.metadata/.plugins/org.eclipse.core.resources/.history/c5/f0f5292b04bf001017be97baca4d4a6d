#include <stdio.h>
#include "xgpio_l.h"
#include "xparameters.h"

int main() {
	Xint8 output = 0,
		inputSw, inputBt;

	XGpio_WriteReg(XPAR_LEDS_BASEADDR, XGPIO_TRI_OFFSET, 0);
	while (1) {
		inputBt=Xil_In32(XPAR_PUSH_BUTTONS_BASEADDR);

		if (inputBt & 0b1000) {
			inputSw=Xil_In32(XPAR_DIP_SWITCHES_BASEADDR);
			output += inputSw;
			Xil_Out32(XPAR_LEDS_BASEADDR, output);
		}
		else if (inputBt & 0b0001) {
			output = 0;
			Xil_Out32(XPAR_LEDS_BASEADDR, output);
		}
	}
	return 0;
}
