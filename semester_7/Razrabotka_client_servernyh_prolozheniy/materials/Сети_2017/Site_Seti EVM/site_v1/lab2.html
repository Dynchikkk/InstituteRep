<html>
<head>
<title>Lab 2</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<style fprolloverstyle>A:hover {color: #FF0000}</style>
</head>
<body text=black bgcolor=#ffffff vlink=black link=black>
<!---------------- Title ------------>
<table border=0 CELLSPACING=0 cellpadding=0 width=99%>
<tr>
	<td align=center bgcolor=#FF9090><font color=white><big><b>Сети ЭВМ</td>
</tr>
</table>
<hr color=red size=1 width=99%>
<!---------------- Title Ends ------->
<br>
<!---------------- Nav Bar    ------->
<table width=99% cols=2 CELLSPACING=0 cellpadding=0>
<tr><td valign=top width=150>
    	<table width=140 CELLSPACING=0 cellpadding=5 border=1 bordercolor=red bordercolordark=white>
		<tr><td bgcolor=#FFe0E0><font size=-1><A href=lab1.html>Лабор. работа №1</A></td></tr>
		<tr><td><font size=-1><b><A href=lab2.html>Лабор. работа №2</A></td></tr>
		<tr><td bgcolor=#FFE0E0><font size=-1><A href=lab3.html>Лабор. работа №3</A></td></tr>
		<tr><td><font size=-1><A href=lab4.html>Лабор. работа №4</A></td></tr>
		<tr><td bgcolor=#FFE0E0><font size=-1><A href=cont_l2.html>Документация</A></td></tr>
		<tr><td><font size=-1><A href=arch.html>Архив</A></td></tr>
		<tr><td bgcolor=#FFE0E0><font size=-1><A href=vopr.html>Вопросы</A></td></tr>
	</td></tr>
	</table>
    </td>
    <td valign=top>
<!------------ Main Text ----- width=550 ------>
<CENTER><B><I><FONT SIZE=+1>Лабораторная работа №2</FONT></I></B>
<hr color=red size=1 width=70%>
Передача и прием пакетов с подтверждением через протокол UDP c использованием методов криптографии для закрытия данных, передаваемых между программами клиента и сервера.</center>

<BR>
<TABLE BORDER=0 WIDTH="99%" BGCOLOR="#FFE0E0"><TR><TD>Цель работы</TD></TR></TABLE>

<P>
Разработка программы-сервера и программы-клиента в  архитектуре взаимодействия “клиент-сервер” с использованием протокола <A HREF="udp.htm" target="main">UDP</A> и библиотеки <A HREF="sockets1.htm" target="main">WINSOCK</A>. Обеспечить закрытие данных (шифрование), при передаче их по сети между программами клиента и сервера. 
<BR>
<BR>&nbsp;
<TABLE BORDER=0 WIDTH="99%" BGCOLOR="#FFE0E0"><TR><TD>Задание</TD></TR></TABLE>
<BR>

<b>Разработать программу клиента, которая должна:</b>
<BR>- обеспечивать ввод сообщений и отправку их на сервер;
<BR>- шифрование передаваемых данных.
<BR>&nbsp;
<BR>
<b>Разработать программу сервера, которая должна: </b>
<BR>- ожидать запросов от программ клиентов на соединение; 
<BR>- устанавливать соединение с клиентами; 
<BR>- принимать данные от клиентов, расшифровывать и выполнять их обработку.
<BR>&nbsp;


<TABLE BORDER=0 WIDTH="99%" BGCOLOR="#FFE0E0"><TR><TD>Алгоритм работы программы-сервера</TD></TR></TABLE>

<p>Для того, чтобы процессы-клиенты могли связаться с сервером, сервер создает сокет для обмена данными с помощью системного вызова <A HREF="sockets1.htm#socket" target="main">socket</A>.  Данная операция также производится и в клиентской программе.
<BR>Далее выполняется операция получения локального адреса. Это нужно для того, чтобы все запросы на соединения, приходящие на данную ЭВМ и обращающиеся к указанному порту, операционная система направляла данному процессу. Операция производится посредством  системного вызова <A HREF="sockets1.htm#bind" target="main">bind</A>, в котором указывается созданный ранее сокет, IP–адрес ЭВМ (как правило, это константа 0) и идентификатор процесса, т. е. порт. 
<BR>Далее в цикле происходит прием данных через сокет от клиентов с помощью системного вызова <A HREF="sockets1.htm#recvfrom" target="main">recvfrom</A>. Принятая строка выводится на экран. Работа программы-сервера завершается в том случае, если принимается сообщение 'exit'. 



<BR><BR>
<TABLE BORDER=0 WIDTH="99%" BGCOLOR="#FFE0E0"><TR><TD>Алгоритм работы программы-клиента</TD></TR></TABLE>
<p>
Работа программы-клиента во многом схожа с работой программы-сервера. Вначале создается сокет для обмена данными и вызывается функция <A HREF="sockets1.htm#bind" target="main">bind</A> для получения локального адреса. Далее в цикле пользователь набирает строки, которые отсылаются на сервер (системный вызов <A HREF="sockets1.htm#sendto" target="main">sendto</A>). Цикл выполняется до тех пор, пока не будет передано сообщение 'exit'. 
<br>По окончании работы  процесс-клиент и процесс-сервер закрывают свои копии сокетов (системный вызов <A HREF="sockets1.htm#close" target="main">closesocket</A>) и уничтожаются.
<br>Для обеспечения закрытия данных, передаваемых между клиентом и сервером по сети, выполняется их шифрование при передаче и расшифровка при приеме. 


</p>
<TABLE BORDER=0 WIDTH="99%" BGCOLOR="#FFE0E0"><TR><TD>Порядок выполнения лабораторной работы</TD></TR></TABLE>

<b>Загрузка, компилирование и выполнение проекта:</b><br>
1. Запустить <i>Microsoft Visual Studio 2005</i>. <br>
2. Выбрать в главном меню <i>File->Open->Project/Solution</i>. <br>
3. Указать путь к файлу <i>lab_2.sln</i> и далее нажать кнопку <i>Open</i>.  <br>
4. Слева в окне выбрать вкладку <i>Solution Explorer</i>. Все файлы проекта будут представлены в этом окне. Двойное нажатие левой кнопкой мыши на файле откроет его для редактирования в основной области экрана.<br>
<center><br>
 <IMG SRC="img/pic_2_Solution.JPG" ><br>
<b>Рисунок 1. Окно Solution Explorer</b>
</center><br>
5.Нажать кнопку <i>F7</i>. Проект будет откомпилирован целиком. Внизу в окне <i>Output</i> будет представлен отчет.<br> 
<center><br>
 <IMG SRC="img/pic_2_output.JPG" ><br>
<b>Рисунок 2. Окно Output</b>
</center><br>


Обратите внимание на последнюю строчку в проекте, в ней приведены результаты компиляции:<br><br>
<i>========== Build: 2 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========</i><br>
<br>
6. В папке <i>Debug</i> (или <i>Release</i>) будут созданы исполняемые файлы программ: <i>UDP_server.exe</i> – программа-сервер, <i>UDP_client.exe</i> – программа-клиент.<br>

<br><TABLE BORDER=0 WIDTH="99%" BGCOLOR="#FFE0E0"><TR><TD>Описание работы программ</TD></TR></TABLE><br>

<b>Программа-сервер<br></b><p>
После запуска сервера, программа автоматически перейдет в режим ожидания соединения от клиента. Никаких действий более выполнять не требуется. Для выхода из программы использовать комбинацию клавиш CTRL+C или отправить сообщение «exit» с клиентской консоли. После отправки сообщения клиентом в окне сервера появится принятая информация.<br>
 
<center><br>
 <IMG SRC="img/pic_2_server.JPG" ><br>
<b>Рисунок 3. Работа сервера</b>
</center><br>


<b>Программа-клиент<br></b><p>
После запуска программы необходимо ввести сообщение и нажать клавишу Enter для отправки. Работа клиента и сервера будет завершена, после отправки клиентом сообщения «exit».<br>
 
<center><br>
 <IMG SRC="img/pic_2_client.JPG" ><br>
<b>Рисунок 4. Работа клиента</b>
</center><br>


    </td>
</tr>
</table>
<hr size=1 color=red width=100%>
<table width=99% cellspacing=0 cellpadding=0><tr><td bgcolor=#FF9090><font color=white>&nbsp;&copy Пензенский Госудрственный Университет. 2009 г.</td>
</tr>
</td></tr>
</table>
</body>
</html>