<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Fast Ethernet как развитие классического Ethernet'а</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
</head>

<body>
<h3><a name="19_1"></a>19.1. Fast Ethernet как развитие классического Ethernet'а 
</h3>
      <P align=justify>Технология Fast Ethernet является эволюционным развитием 
      классической технологии Ethernet. 10-Мегабитный Ethernet устраивал 
      большинство пользователей на протяжении около 15 лет. Однако в начале 90-х 
      годов начала ощущаться его недостаточная пропускная способность. Если для 
      компьютеров на процессорах Intel 80286 или 80386 с шинами ISA (8 Мбайт/с) 
      или EISA (32 Мбайт/с) пропускная способность сегмента Ethernet составляла 
      1/8 или 1/32 канала "память - диск", то это хорошо согласовывалось с 
      соотношением объемов локальных данных и внешних данных для компьютера. 
      Теперь же у мощных клиентских станций с процессорами Pentium или Pentium 
      PRO и шиной PCI (133 Мбайт/с) эта доля упала до 1/133, что явно 
      недостаточно. Поэтому многие сегменты 10-Мегабитного Ethernet'а стали 
      перегруженными, реакция серверов в них значительно упала, а частота 
      возникновения коллизий существенно возросла, еще более снижая номинальную 
      пропускную способность. 
      <P align=justify>В 1992 году группа производителей сетевого оборудования, 
      включая таких лидеров технологии Ethernet как SynOptics, 3Com и ряд 
      других, образовали некоммерческое объединение Fast Ethernet Alliance для 
      разработки стандарта на новую технологию, которая обобщила бы достижения 
      отдельных компаний в области Ethernet-преемственного высокоскоростного 
      стандарта. Новая технология получила название Fast Ethernet. 
      <P align=justify>Одновременно были начаты работы в институте IEEE по 
      стандартизации новой технологии - там была сформирована исследовательская 
      группа для изучения технического потенциала высокоскоростных технологий. 
      За период с конца 1992 года и по конец 1993 года группа IEEE изучила 
      100-Мегабитные решения, предложенные различными производителями. Наряду с 
      предложениями Fast Ethernet Alliance группа рассмотрела также и другую 
      высокоскоростную технологию, предложенную компаниями <I>Hewlett-Packard и 
      AT&amp;T.</I> 
      <P align=justify>В центре дискуссий была проблема сохранения 
      соревновательного метода доступа CSMA/CD. Предложение по Fast Ethernet'у 
      сохраняло этот метод и тем самым обеспечивало преемственность и 
      согласованность сетей 10Base-T и 100Base-T. Коалиция HP и AT&amp;T, 
      которая имела поддержку гораздо меньшего числа производителей в сетевой 
      индустрии, чем Fast Ethernet Alliance, предложила совершенно новый метод 
      доступа, называемый <I>Demand Priority. </I>Он существенно менял картину 
      поведения узлов в сети, поэтому не смог вписаться в технологию Ethernet и 
      стандарт 802.3, и для его стандартизации был организован новый комитет 
      IEEE 802.12. 
      <P align=justify>В мае 1995 года комитет IEEE принял спецификацию Fast 
      Ethernet в качестве стандарта 802.3u, который не является самостоятельным 
      стандартом, а представляет собой дополнение к существующему стандарту 
      802.3 в виде глав с 21 по 30. Отличия Fast Ethernet от Ethernet 
      сосредоточены на физическом уровне (рис. 15). 
      <P align=justify>Более сложная структура физического уровня технологии 
      Fast Ethernet вызвана тем, что в ней используется три варианта кабельных 
      систем - оптоволокно, 2-х парная витая пара категории 5 и 4-х парная витая 
      пара категории 3, причем по сравнению с вариантами физической реализации 
      Ethernet (а их насчитывается шесть), здесь отличия каждого варианта от 
      других глубже - меняется и количество проводников, и методы кодирования. А 
      так как физические варианты Fast Ethernet создавались одновременно, а не 
      эволюционно, как для сетей Ethernet, то имелась возможность детально 
      определить те подуровни физического уровня, которые не изменяются от 
      варианта к варианту, и остальные подуровни, специфические для каждого 
      варианта. 
      <CENTER>
  <P><img src="images/2_015.gif" width="440" height="450"> 
  <P><I>Рис. 15. Отличия стека протоколов 100Base-T от стека протоколов 
      10Base-T </I></CENTER>
      <P align=justify>Основными достоинствами технологии Fast Ethernet 
      являются: 
      <UL>
        <LI>увеличение пропускной способности сегментов сети до 100 Мб/c; 
        <LI>сохранение метода случайного доступа Ethernet; 
        <LI>сохранение звездообразной топологии сетей и поддержка традиционных 
        сред передачи данных - витой пары и оптоволоконного кабеля. </LI></UL>
      <P align=justify>Указанные свойства позволяют осуществлять постепенный 
      переход от сетей 10Base-T - наиболее популярного на сегодняшний день 
      варианта Ethernet - к скоростным сетям, сохраняющим значительную 
      преемственность с хорошо знакомой технологией: Fast Ethernet не требует 
      коренного переобучения персонала и замены оборудования во всех узлах сети. 

      <P align=justify>Официальный стандарт 100Base-T (802.3u) установил три 
      различных спецификации для физического уровня (в терминах семиуровневой 
      модели OSI) для поддержки следующих типов кабельных систем: 
      <UL>
        <LI>100Base-TX для двухпарного кабеля на неэкранированной витой паре UTP 
        категории 5, или экранированной витой паре STP Type 1; 
        <LI>100Base-T4 для четырехпарного кабеля на неэкранированной витой паре 
        UTP категории 3, 4 или 5; 
        <LI>100Base-FX для многомодового оптоволоконного кабеля. </LI></UL>
      
<h3><a name="19_2"></a>19.2. Метод доступа к среде CSMA/CD</h3>
      <P align=justify>Подуровни LLC и MAC в стандарте Fast Ethernet не 
      претерпели изменений. Напомним кратко их функции. 
      <P align=justify><B>Подуровень LLC</B> обеспечивает интерфейс протокола 
      Ethernet с протоколами вышележащих уровней, например, с IP или IPX. Кадр 
      LLC, изображенный на рисунке 16, вкладывается в кадр MAC и позволяет за 
      счет полей DSAP и SSAP идентифицировать адрес сервисов назначения и 
      источника соответственно. Например, при вложении в кадр LLC пакета IPX, 
      значения как DSAP, так и SSAP должны быть равны Е0. Поле управления кадра 
      LLC позволяет реализовать процедуры обмена данными трех типов: 
      <UL>
        <LI>Процедура типа 1 определяет обмен данными без предварительного 
        установления соединения и без повторной передачи кадров в случае 
        обнаружения ошибочной ситуации, то есть является процедурой 
        дейтаграммного типа. Поле управления для этого типа процедур имеет 
        значение 03, что определяет все кадры как ненумерованные. 
        <LI>Процедура типа 2 определяет режим обмена с установлением соединений, 
        нумерацией кадров, управлением потоком кадров и повторной передачей 
        ошибочных кадров. В этом режиме протокол LLC аналогичен протоколу HDLC. 
        <LI>Процедура типа 3 определяет режим передачи данных без установления 
        соединения, но с получением подтверждения о доставке информационного 
        кадра адресату. </LI></UL>
      <CENTER>
  <P><img src="images/2_016.gif" width="461" height="196"> 
  <P><I>Рис. 16. Формат кадра LLC с расширением SNAP</I></CENTER>
      <P align=justify>Существует расширение формата кадра LLC, называемое SNAP 
      (Subnetwork Access Protocol). В случае использования расширения SNAP в 
      поля DSAP и SSAP записывается значение AA, тип кадра по-прежнему равен 03, 
      а для обозначения типа протокола, вложенного в поле данных, используются 
      следующие 4 байта, причем байты идентификатора организации (OUI) всегда 
      равны 00 (за исключением протокола AppleTalk), а последний байт (TYPE) 
      содержит идентификатор типа протокола (например, 0800 для IP). 
      <P align=justify>Заголовки LLC или LLC/SNAP используются мостами и 
      коммутаторами для трансляции протоколов канального уровня по стандарту 
      IEEE 802.2H. 
      <P align=justify><B>Подуровень MAC </B>ответственен за формирование кадра 
      Ethernet, получение доступа к разделяемой среде передачи данных и за 
      отправку с помощью физического уровня кадра по физической среде узлу 
      назначения. 
      <P align=justify>Разделяемая среда Ethernet, независимо от ее физической 
      реализации (коаксиальный кабель, витая пара или оптоволокно с 
      повторителями), в любой момент времени находится в одном из трех состояний 
      - свободна, занята, коллизия. Состояние занятости соответствует нормальной 
      передаче кадра одним из узлов сети. Состояние коллизии возникает при 
      одновременной передаче кадров более, чем одним узлом сети. 
      <P align=justify>MAC-подуровень каждого узла сети получает от физического 
      уровня информацию о состоянии разделяемой среды. Если она свободна, и у 
      MAC-подуровня имеется кадр для передачи, то он передает его через 
      физический уровень в сеть. Физический уровень одновременно с побитной 
      передачей кадра следит за состоянием среды. Если за время передачи кадра 
      коллизия не возникла, то кадр считается переданным. Если же за это время 
      коллизия была зафиксирована, то передача кадра прекращается, и в сеть 
      выдается специальная последовательность из 32 бит 
      (jam-последовательность), которая должна помочь однозначно распознать 
      коллизию всеми узлами сети. 
      <P align=justify>После фиксации коллизии MAC-подуровень делает случайную 
      паузу, а затем вновь пытается передать данный кадр. Случайный характер 
      паузы уменьшает вероятность одновременной попытки захвата разделяемой 
      среды несколькими узлами при следующей попытке. Интервал, из которого 
      выбирается случайная величина паузы, возрастает с каждой попыткой (до 
      10-ой), так что при большой загрузке сети и частом возникновении коллизий 
      происходит притормаживание узлов. Максимальное число попыток передачи 
      одного кадра - 16, после чего MAC-подуровень оставляет данный кадр и 
      начинает передачу следующего кадра, поступившего с LLC-подуровня. 
      <P align=justify>MAC-подуровень узла приемника, который получает биты 
      кадра от своего физического уровня, проверяет поле адреса кадра, и если 
      адрес совпадает с его собственным, то он копирует кадр в свой буфер. Затем 
      он проверяет, не содержит ли кадр специфические ошибки: по контрольной 
      сумме (FCS error), по максимально допустимому размеру кадра (jabber 
      error), по минимально допустимому размеру кадра (runts), по неверно 
      найденным границам байт (alignment error). Если кадр корректен, то его 
      поле данных передается на LLC-подуровень, если нет - то отбрасывается. 
       
<h3><a name="19_3"></a>19.3. Форматы кадров технологии Fast Ethernet</h3>
      <P align=justify>Форматы кадров технологии Fast Ethernet не отличаются от 
      форматов кадров технологий 10-Мегабитного Ethernet'a. На рисунке 17 
      приведен формат MAC-кадра Ethernet, а также временные параметры его 
      передачи по сети для скорости 10 Мб/с и для скорости 100 Мб/с. 
      <P align=justify>В кадрах стандарта Ethernet-II (или Ethernet DIX), 
      опубликованного компаниями Xerox, Intel и Digital еще до появления 
      стандарта IEEE 802.3, вместо двухбайтового поля L (длина поля данных) 
      используется двухбайтовое поле T (тип кадра). Значение поля типа кадра 
      всегда больше 1518 байт, что позволяет легко различить эти два разных 
      формата кадров Ethernet DIX и IEEE 802.3. 
      <P align=justify>Все времена передачи кадров Fast Ethernet в 10 раз меньше 
      соответствующих времен технологии 10-Мегабитного Ethernet'а: межбитовый 
      интервал составляет 10 нс вместо 100 нс, а межкадровый интервал - 0.96 мкс 
      вместо 9.6 мкс соответственно. 
       
<h3><a name="19_4"></a>19.4. Спецификации физического уровня Fast Ethernet </h3>
      <P align=justify>Для технологии Fast Ethernet разработаны различные 
      варианты физического уровня, отличающиеся не только типом кабеля и 
      электрическими параметрами импульсов, как это сделано в технологии 10 Мб/с 
      Ethernet, но и способом кодирования сигналов, и количеством используемых в 
      кабеле проводников. Поэтому физический уровень Fast Ethernet имеет более 
      сложную структуру, чем классический Ethernet. Эта структура представлена 
      на рисунке 18. 
      <CENTER>
  <P><img src="images/2_018.gif" width="473" height="379"> 
  <P><I>Рис. 18. Структура физического уровня Fast Ethernet</I></CENTER>
      <P align=justify>Физический уровень состоит из трех подуровней: 
      <UL>
        <LI>Уровень согласования (reconciliation sublayer). 
        <LI>Независимый от среды интерфейс (Media Independent Interface, MII). 
        <LI>Устройство физического уровня (Physical layer device, PHY). </LI></UL>
      <P align=justify>Устройство физического уровня (PHY) обеспечивает 
      кодирование данных, поступающих от MAC-подуровня для передачи их по кабелю 
      определенного типа, синхронизацию передаваемых по кабелю данных, а также 
      прием и декодирование данных в узле-приемнике. 
      <P align=justify>Интерфейс MII поддерживает независимый от используемой 
      физической среды способ обмена данными между MAC-подуровнем и подуровнем 
      PHY. Этот интерфейс аналогичен по назначению интерфейсу AUI классического 
      Ethernet'а за исключением того, что интерфейс AUI располагался между 
      подуровнем физического кодирования сигнала (для любых вариантов кабеля 
      использовался одинаковый метод физического кодирования - манчестерский 
      код) и подуровнем физического присоединения к среде, а интерфейс MII 
      располагается между MAC-подуровнем и подуровнями кодирования сигнала, 
      которых в стандарте Fast Ethernet три - FX, TX и T4. 
      <P align=justify>Подуровень согласования нужен для того, чтобы согласовать 
      работу подуровня MAC с интерфейсом MII. 
       
<h3><a name="19_5"></a>19.5. Интерфейс MII</h3>
      <P align=justify>Существует два варианта реализации интерфейса MII: 
      внутренний и внешний. 
      <P align=justify>При внутреннем варианте микросхема, реализующая подуровни 
      MAC и согласования, с помощью интереса MII соединяется с микросхемой 
      трансивера внутри одного и того же конструктива, например, платы сетевого 
      адаптера или модуля маршрутизатора (рис. 19). Микросхема трансивера 
      реализует все функции устройства PHY. 
      <CENTER>
  <P><img src="images/2_019.gif" width="457" height="291"> 
  <P><I>Рис. 19. Сетевой адаптер с внутренним интерфейсом MII</I></CENTER>
      <P align=justify>Внешний вариант соответствует случаю, когда трансивер 
      вынесен в отдельное устройство и соединен кабелем MII через разъем MII с 
      микросхемой MAC-подуровня (рис. 20). Разъем MII в отличие от разъема AUI 
      имеет 40 контактов, максимальная длина кабеля MII составляет 1 метр. 
      Сигналы, передаваемые по интерфейсу MII, имеют амплитуду 5 В. 
      <CENTER>
  <P><img src="images/2_020.gif" width="473" height="185"> 
  <P><I>Рис. 20. Использование внешнего трансивера с интерфейсом 
      MII</I></CENTER>
      <P align=justify>Интерфейс MII может использоваться не только для связи 
      PHY с MAC, но и для соединения устройств PHY с микросхемой повторения 
      сигналов в многопортовом повторителе-концентраторе (рис. 21). 
      <CENTER>
  <P><img src="images/2_021.gif" width="288" height="210"> 
  <P><I>Рис. 21. Повторитель со встроенными устройствами PHY</I></CENTER>
      <P align=justify><B>Передача данных через MII</B> 
      <P align=justify>MII использует 4-битные порции данных для параллельной 
      передачи их между MAC и PHY. Канал передачи данных от MAC к PHY образован 
      4-битной шиной данных, которая синхронизируется тактовым сигналом, 
      генерируемым PHY, а также сигналом "Передача", генерируемым 
      MAC-подуровнем. 
      <P align=justify>Аналогично, канал передачи данных от PHY к MAC образован 
      другой 4-битной шиной данных, которая синхронизируется тактовым сигналом и 
      сигналом "Прием", которые генерируются PHY. 
      <P align=justify>Если устройство PHY обнаружило ошибку в состоянии 
      физической среды, то оно может передать сообщение об этом на подуровень 
      MAC в виде сигнала "Ошибка приема" (receive error). MAC-подуровень (или 
      повторитель) сообщают об ошибке устройству PHY с помощью сигнала "Ошибка 
      передачи" (transmit error). Обычно, повторитель, получив от PHY 
      какого-либо порта сигнал "Ошибка приема", передает на все устройства PHY 
      остальных портов сигнал "Ошибка передачи". 
      <P align=justify>В MII определена двухпроводная шина для обмена между MAC 
      и PHY управляющей информацией. MAC-подуровень использует эту шину для 
      передачи PHY данных о режиме его работы. PHY передает по этой шине 
      информацию по запросу о статусе порта и линии. Данные о конфигурации, а 
      также о состоянии порта и линии хранятся соответственно в двух регистрах: 
      регистре управления (Control Register) и регистре статуса (Status 
      Register). 
      <P align=justify>Регистр управления используется для установки скорости 
      работы порта, для указания, будет ли порт принимать участие в процессе 
      автопереговоров о скорости линии, для задания режима работы порта - 
      полудуплексный или полнодуплексный, и т.п. Функция автопереговоров 
      (Auto-negotiation) позволяет двум устройствам, соединенным одной линией 
      связи, автоматически, без вмешательства оператора, выбрать наиболее 
      высокоскоростной режим работы, который будет поддерживается обоими 
      устройствами. 
      <P align=justify>Регистр статуса содержит информацию о действительном 
      текущем режиме работы порта, в том числе и в том случае, когда режим 
      выбран в результате проведения автопереговоров. 
      <P align=justify>Регистр статуса может содержать данные об одном из 
      следующих режимов: 
      <UL>
        <LI>100Base-T4; 
        <LI>100Base-TX full-duplex; 
        <LI>100Base-TX half-duplex; 
        <LI>10 Mb/s full-duplex; 
        <LI>10Mb/s half-duplex; 
        <LI>ошибка на дальнем конце линии. </LI></UL>
<h3><a name="19_6"></a>19.6. Физический уровень 100Base-FX - многомодовое оптоволокно</h3>
      <P align=justify>Физический уровень PHY ответственен за прием данных в 
      параллельной форме от MAC-подуровня, трансляцию их в один (TX или FX) или 
      три последовательных потока бит с возможностью побитной синхронизации и 
      передачу их через разъем на кабель. Аналогично, на приемном узле уровень 
      PHY должен принимать сигналы по кабелю, определять моменты синхронизации 
      бит, извлекать биты из физических сигналов, преобразовывать их в 
      параллельную форму и передавать подуровню MAC. 
      <P align=justify>Структура физического уровня 100Base-FX представлена на 
      рисунке 22. 
      <CENTER>
  <P><img src="images/2_022.gif" width="300" height="317"> 
  <P><I>Рис. 22. Физический уровень PHY FX</I></CENTER>
      <P align=justify>Эта спецификация определяет работу протокола Fast 
      Ethernet по многомодовому оптоволокну в полудуплексном и полнодуплексном 
      режимах на основе хорошо проверенной схемы кодирования и передачи 
      оптических сигналов, использующейся уже на протяжении ряда лет в стандарте 
      FDDI. Как и в стандарте FDDI, каждый узел соединяется с сетью двумя 
      оптическими волокнами, идущими от приемника (Rx) и от передатчика (Tx). 
      <P align=justify>Между спецификациями PHY FX и PHY TX есть много общего, 
      поэтому общие для двух спецификаций свойства будут даваться под обобщенным 
      названием PHY FX/TX. 
      <P align=justify><B>Метод кодирования 4B/5B</B> 
      <P align=justify>10 Мб/с версии Ethernet используют манчестерское 
      кодирование для представления данных при передаче по кабелю. Метод 
      кодирования 4B/5B определен в стандарте FDDI, и он без изменений перенесен 
      в спецификацию PHY FX/TX. При этом методе каждые 4 бита данных 
      MAC-подуровня (называемых символами) представляются 5 битами. 
      Использование избыточного бита позволяет применить потенциальные коды при 
      представлении каждого из пяти бит в виде электрических или оптических 
      импульсов. Потенциальные коды обладают по сравнению с манчестерскими 
      кодами более узкой полосой спектра сигнала, а, следовательно, предъявляют 
      меньшие требования к полосе пропускания кабеля. Однако, прямое 
      использование потенциальных кодов для передачи исходных данных без 
      избыточного бита невозможно из-за плохой самосинхронизации приемника и 
      источника данных: при передаче длинной последовательности единиц или нулей 
      в течение долгого времени сигнал не изменяется и приемник не может 
      определить момент чтения очередного бита. 
      <P align=justify>При использовании пяти бит для кодирования шестнадцати 
      исходных 4-х битовых комбинаций, можно построить такую таблицу 
      кодирования, в которой любой исходный 4-х битовый код представляется 5-ти 
      битовым кодом с чередующимися нулями и единицами. Тем самым обеспечивается 
      синхронизация приемника с передатчиком. Так как исходные биты 
      MAC-подуровня должны передаваться со скоростью 100Мб/c, то наличие одного 
      избыточного бита вынуждает передавать биты результирующего кода 4B/5B со 
      скоростью 125 Мб/c, то есть межбитовое расстояние в устройстве PHY 
      составляет 8 наносекунд. 
      <P align=justify>Так как из 32 возможных комбинаций 5-битовых порций для 
      кодирования порций исходных данных нужно только 16, то остальные 16 
      комбинаций в коде 4В/5B используются в служебных целях. 
      <P align=justify>Наличие служебных символов позволило использовать в 
      спецификациях FX/TX схему непрерывного обмена сигналами между передатчиком 
      и приемником и при свободном состоянии среды, что отличает их от 
      спецификации 10Base-T, когда незанятое состояние среды обозначается полным 
      отсутствием на ней импульсов информации. Для обозначения незанятого 
      состояния среды используется служебный символ Idle (11111), который 
      постоянно циркулирует между передатчиком и приемником, поддерживая их 
      синхронизм и в периодах между передачами информации, а также позволяя 
      контролировать физическое состояние линии (рис. 23). 
      <CENTER>
  <P><img src="images/2_023.gif" width="480" height="288"> 
  <P><I>Рис. 23. Обмен символами Idle при незанятом состоянии 
      среды</I></CENTER>
      <P align=justify>Существование запрещенных комбинаций символов позволяет 
      отбраковывать ошибочные символы, что повышает устойчивость работы сетей с 
      PHY FX/TX. 
      <P align=justify>Для отделения кадра Ethernet от символов Idle 
      используется комбинация символов Start Delimiter (пара символов JK), а 
      после завершения кадра перед первым символом Idle вставляется символ T 
      (рис. 24). 
      <CENTER>
  <P><img src="images/2_024.gif" width="600" height="161"> 
  <P><I>Рис. 24. Непрерывный поток данных спецификаций PHY 
FX/TX</I></CENTER>
      <P align=justify><B>Передача 5-битовых кодов по линии методом NRZI</B> 
      <P align=justify>После преобразования 4-битовых порций MAC-кодов в 
      5-битовые порции PHY их необходимо представить в виде оптических или 
      электрических сигналов в кабеле, соединяющем узлы сети. Спецификации PHY 
      FX и PHY TX используют для этого различные методы физического кодирования 
      - NRZI и MLT-3 соответственно. Эти же методы определены в стандарте FDDI 
      для передачи сигналов по оптоволокну (спецификация PMD) и витой паре 
      (спецификация TP-PMD). 
      <P align=justify>Рассмотрим метод <I>NRZI - Non Return to Zero Invert to 
      ones </I>- метод без возврата к нулю с инвертированием для единиц. Этот 
      метод представляет собой модификацию простого потенциального метода 
      кодирования, называемого <I>Non Return to Zero (NRZ)</I>, когда для 
      представления 1 и 0 используются потенциалы двух уровней. В методе NRZI 
      также используется два уровня потенциала сигнала, но потенциал, 
      используемый для кодирования текущего бита зависит от потенциала, который 
      использовался для кодирования предыдущего бита (так называемое, 
      дифференциальное кодирование). Если текущий бит имеет значение 1, то 
      текущий потенциал представляет собой инверсию потенциала предыдущего бита, 
      независимо от его значения. Если же текущий бит имеет значение 0, то 
      текущий потенциал повторяет предыдущий. 
      <P align=justify>Из описания метода NRZI видно, что для обеспечения частых 
      изменений сигнала, а значит и для поддержания самосинхронизации приемника, 
      нужно исключить из кодов слишком длинные последовательности нулей. Коды 
      4B/5B построены так, что гарантируют не более трех нулей подряд при любом 
      сочетании бит в исходной информации. На рисунке 25 приведен пример 
      кодирования последовательности бит методами NRZ и NRZI. 
      <CENTER>
  <P><img src="images/2_025.gif" width="476" height="419"> 
  <P><I>Рис. 2.25. Сравнение методов кодирования NRZ и NRZI</I></CENTER>
      <P align=justify>Основное преимущество NRZI кодирования по сравнению с NRZ 
      кодированием в более надежном распознавании передаваемых 1 и 0 на линии в 
      условиях помех. 
    
<h3><a name="19_7"></a>19.7. Физический уровень 100Base-TХ - двухпарная витая 
  пара</h3>
      <P align=justify>Структура физического уровня спецификации PHY TX 
      представлена на рисунке 26. 
      <P align=justify>Основные отличия от спецификации PHY FX - использование 
      метода MLT-3 для передачи сигналов 5-битовых порций кода 4В/5B по витой 
      паре, а также наличие функции автопереговоров (Auto-negotiation) для 
      выбора режима работы порта. 
      <CENTER>
  <P><img src="images/2_026.gif" width="338" height="392"> 
  <P><I>Рис. 26. Структура физического уровня PHY TX</I></CENTER>
      <P align=justify>Метод MLT-3 использует потенциальные сигналы двух 
      полярностей для представления 5-битовых порций информации (рис. 27). 
      <CENTER>
  <P><img src="images/2_027.gif" width="334" height="172"> 
  <P><I>Рис. 27. Метод кодирования MLT-3</I></CENTER>
      <P align=justify>Кроме использования метода MLT-3, спецификация PHY TX 
      отличается от спецификации PHY FX тем, что в ней используется пара 
      шифратор-дешифратор (scrambler/descrambler), как это определено в 
      спецификации ANSI TP-PMD. Шифратор принимает 5-битовые порции данных от 
      подуровня PCS, выполняющего кодирование 4B/5B, и зашифровывает сигналы 
      перед передачей на подуровень MLT-3 таким образом, чтобы равномерно 
      распределить энергию сигнала по всему частотному спектру - это уменьшает 
      электромагнитное излучение кабеля. 
      <P align=justify><B>Автопереговорный процесс</B> 
      <P align=justify>Спецификации PHY TX и PHY T4 поддерживают функцию 
      <I>Auto-negotiation</I>, с помощью которой два взаимодействующих 
      устройства PHY могут автоматически выбрать наиболее эффективный режим 
      работы. 
      <P align=justify>Описанная ниже схема Auto-negotiation является теперь 
      стандартом технологии 100Base-T. До этого производители применяли 
      различные собственные схемы автоматического определения скорости работы 
      взаимодействующих портов, которые не были совместимы. Принятую в качестве 
      стандарта схему Auto-negotiation предложила первоначально компания 
      National Semiconductor под названием NWay. 
      <P align=justify>Всего в настоящее время определено 5 различных режимов 
      работы, которые могут поддерживать устройства PHY TX или PHY T4 на витых 
      парах: 
      <UL>
        <LI>10Base-T - 2 пары категории 3; 
        <LI>10Base-T full-duplex - 2 пары категории 3; 
        <LI>100Base-TX - 2 пары категории 5 (или Type 1A STP); 
        <LI>100Base-TX full-duplex - 2 пары категории 5 (или Type 1A STP); 
        <LI>100Base-T4 - 4 пары категории 3. </LI></UL>
      <P align=justify>Режим 10Base-T имеет самый низкий приоритет при 
      переговорном процессе, а режим 100Base-T4 - самый высокий. Переговорный 
      процесс происходит при включении питания устройства, а также может быть 
      инициирован и в любой момент модулем управления. 
      <P align=justify>Для организации переговорного процесса используются 
      служебные сигналы проверки целостности линии технологии 10Base-T - link 
      test pulses, если узел-партнер поддерживает только стандарт 10Base-T. 
      Узлы, поддерживающие функцию Auto-negotiation, также используют 
      существующую технологию сигналов проверки целостности линии, при этом они 
      посылают пачки таких импульсов, инкапсулирующие информацию переговорного 
      процесса Auto-negotiation. Такие пачки носят название <I>Fast Link Pulse 
      burst (FLP)</I>. 
      <P align=justify>Устройство, начавшее процесс auto-negotiation, посылает 
      своему партнеру пачку импульсов FLP, в котором содержится 8-битное слово, 
      кодирующее предлагаемый режим взаимодействия, начиная с самого 
      приоритетного, поддерживаемого данным узлом. 
      <P align=justify>Если узел-партнер поддерживает функцию Auto-negotuiation 
      и также может поддерживать предложенный режим, то он отвечает пачкой 
      импульсов FLP, в которой подтверждает данный режим и на этом переговоры 
      заканчиваются. Если же узел-партнер может поддерживать менее приоритетный 
      режим, то он указывает его в ответе и этот режим выбирается в качестве 
      рабочего. Таким образом, всегда выбирается наиболее приоритетный общий 
      режим узлов. 
      <P align=justify>Узел, который поддерживает только технологию 10Base-T, 
      каждые 16 миллисекунд посылает импульсы для проверки целостности линии, 
      связывающей его с соседним узлом. Такой узел не понимает запрос FLP, 
      который делает ему узел с функцией Auto-negotiation, и продолжает посылать 
      свои импульсы. Узел, получивший в ответ на запрос FLP только импульсы 
      проверки целостности линии, понимает, что его партнер может работать 
      только по стандарту 10Base-T и устанавливает этот режим работы и для себя. 

      <P align=justify><B>Полнодуплексный режим работы</B> 
      <P align=justify>Узлы, поддерживающие спецификации PHY FX и PHY TX, могут 
      работать в полнодуплексном режиме (full-duplex mode). В этом режиме не 
      используется метод доступа к среде CSMA/CD и отсутствует понятие коллизий 
      - каждый узел одновременно передает и принимает кадры данных по каналам Tx 
      и Rx. 
      <P align=justify>Полнодуплексная работа возможна только при соединения 
      сетевого адаптера с коммутатором или же при непосредственном соединении 
      коммутаторов. 
      <P align=justify>При полнодуплексной работе стандарты 100Base-TX и 
      100Base-FX обеспечивают скорость обмена данными между узлами 200 Мб/с. 
      <P align=justify>Полнодуплексный режим работы для сетей 100Base-T пока не 
      принят комитетом IEEE в качестве стандарта. Тем не менее, многие 
      производители выпускают как сетевые адаптеры, так и коммутаторы для этого 
      режима. Из-за отсутствия стандарта эти продукты не обязательно корректно 
      работают друг с другом. 
      <P align=justify>В полнодуплексном режиме необходимо определить процедуры 
      управления потоком кадров, так как без этого механизма возможны ситуации, 
      когда буферы коммутатора переполнятся и он начнет терять кадры Ethernet, 
      что всегда крайне нежелательно, так как восстановление информации будет 
      осуществляться более медленными протоколами транспортного или прикладного 
      уровней. 
      <P align=justify>Ввиду отсутствия стандартов на полнодуплексные варианты 
      Ethernet'a каждый производитель сам определяет способы управления потоком 
      кадров в коммутаторах и сетевых адаптерах. Обычно, при заполнении буфера 
      устройства до определенного предела, это устройство посылает передающему 
      устройству сообщение о временном прекращении передачи (XOFF). При 
      освобождении буфера посылается сообщение о возможности возобновить 
      передачу (XON). 
       
<H4><a name="19_8"></a>19.8. Физический уровень 100Base-T4 - четырехпарная витая 
  пара</H4>
      <P align=justify>Спецификация PHY T4 была разработана для того, чтобы 
      можно было использовать для высокоскоростного Ethernet'а имеющуюся 
      проводку на витой паре категории 3. Эта спецификация использует все 4 пары 
      кабеля для того, чтобы можно было повысить общую пропускную способность за 
      счет одновременной передачи потоков бит по нескольким витым парам. 
      <P align=justify>Структура физического уровня PHY T4 изображена на рисунке 
      28. 
      <P align=justify>Вместо кодирования 4B/5В в этом методе используется 
      кодирование 8B/6T. Каждые 8 бит информации MAC-уровня кодируются 6-ю 
      троичными цифрами (ternary symbols), то есть цифрами, имеющими три 
      состояния. Каждая троичная цифра имеет длительность 40 наносекунд. Группа 
      из 6-ти троичных цифр затем передается на одну из трех передающих витых 
      пар, независимо и последовательно. Четвертая пара всегда используется для 
      прослушивания несущей частоты в целях обнаружения коллизии. Скорость 
      передачи данных по каждой из трех передающих пар равна 33.3 Мб/c, поэтому 
      общая скорость протокола 100Base-T4 составляет 100 Мб/c. В то же время 
      из-за принятого способа кодирования скорость изменения сигнала на каждой 
      паре равна всего 25 Мбод, что и позволяет использовать витую пару 
      категории 3. 
      <CENTER>
  <P><img src="images/2_028.gif" width="272" height="271"> 
  <P><I>Рис. 28. Физический уровень PHY T4</I></CENTER>
      <P align=justify>На рисунке 29 показано соединение порта MDI сетевого 
      адаптера 100Base-T4 с портом MDI-X повторителя. Из рисунка видно, пара 1-2 
      всегда используется для передачи данных от порта MDI к порту MDI-X, пара 
      3-6 всегда используется для приема данных портом MDI от порта MDI-X, а 
      пары 4-5 и 7-8 являются двунаправленными и используются и для приема, и 
      для передачи, в зависимости от потребности. 
      <CENTER>
  <P><img src="images/2_029.gif" width="473" height="272"> 
  <P><I>Рис. 29. Соединение узлов по спецификации PHY T4</I></CENTER>
      
<h3><a name="19_9"></a>19.9. Правила построения сегментов Fast Ethernet при использовании 
  повторителей класса I и класса II</h3>
      <P align=justify>Технология Fast Ethernet, как и все некоаксиальные 
      варианты Ethernet'а рассчитана на подключение конечных узлов - компьютеров 
      с соответствующими сетевыми адаптерами - к многопортовым 
      концентраторам-повторителям или коммутаторам. 
      <P align=justify>Правила корректного построения сегментов сетей Fast 
      Ethernet включают: 
      <UL>
        <LI>ограничения на максимальные длины сегментов, соединяющих DTE c DTE; 
        <LI>ограничения на максимальные длины сегментов, соединяющих DTE с 
        портом повторителя; 
        <LI>ограничения на максимальный диаметр сети; 
        <LI>ограничения на максимальное число повторителей и максимальную длину 
        сегмента, соединяющего повторители. </LI></UL>
      <P align=justify>Рассмотрим вначале влияние ограничений длин сегментов 
      DTE-DTE. 
      <P align=justify>В качестве <I>DTE (Data Terminal Equipment) </I>может 
      выступать любой источник кадров данных для сети: сетевой адаптер, порт 
      моста, порт маршрутизатора, модуль управления сетью и другие подобные 
      устройства. Порт повторителя не является DTE. В типичной конфигурации сети 
      Fast Ethernet несколько DTE подключается к портам повторителя, образуя 
      сеть звездообразной топологии. 
      <P align=justify>Спецификация IEEE 802.3u определяет следующие 
      максимальные значения сегментов <NOBR>DTE-DTE:</NOBR> 
      <P>&nbsp; 
      <TABLE cellPadding=5 width=500 border=1>
        <TBODY>
        <TR>
          <TD width=150>Стандарт </TD>
          <TD>Тип кабеля </TD>
          <TD>Максимальная длина сегмента</TD></TR>
        <TR>
          <TD>100Base-TX </TD>
          <TD>Category 5 UTP</TD>
          <TD>100 метров</TD></TR>
        <TR>
          <TD>100Base-FX </TD>
          <TD>многомодовое оптоволокно 62.5/125 мкм </TD>
          <TD>412 метров (полудуплекс) 2 км (полный дуплекс)</TD></TR>
        <TR>
          <TD>100Base-T4 </TD>
          <TD>Category 3,4 или 5 UTP </TD>
          <TD>100 метров</TD></TR></TBODY></TABLE>
      <P align=justify>Остановимся подробнее на ограничениях, связанных с 
      соединениями с повторителями. 
      <P align=justify>Повторители Fast Ethernet делятся на два класса. 
      <P align=justify>Повторители класса I поддерживают все типы систем 
      кодирования физического уровня: 100Base-TX/FX и 100Base-T4. Повторители 
      класса II поддерживают только один тип системы кодирования физического 
      уровня - 100Base-TX/FX или 100Base-T4. 
      <P align=justify>В одном домене коллизий допускается наличие только одного 
      повторителя класса I. Это связано с тем, что такой повторитель вносит 
      большую задержку при распространении сигналов из-за необходимости 
      трансляции различных систем сигнализации. 
      <P align=justify>Максимальное число повторителей класса II в домене 
      коллизий - 2, причем они должны быть соединены между собой кабелем не 
      длиннее 5 метров. 
      <P align=justify>Небольшое количество повторителей Fast Ethernet не 
      является серьезным препятствием при построении сетей. Во-первых, наличие 
      стековых повторителей снимает проблемы ограниченного числа портов - все 
      каскадируемые повторители представляют собой один повторитель с 
      достаточным числом портов - до нескольких сотен. Во-вторых, применение 
      коммутаторов и маршрутизаторов делит сеть на несколько доменов коллизий, в 
      каждом из которых обычно имеется не очень большое число станций. 
      <P align=justify>В следующей таблице сведены правила построения сети на 
      основе повторителе класса I. 
      <P>&nbsp; 
      <TABLE cellPadding=5 width=500 border=1>
        <TBODY>
        <TR>
          <TD>Тип кабелей </TD>
          <TD>Максимальный диаметр сети </TD>
          <TD>Максимальная длина сегмента</TD></TR>
        <TR>
          <TD>Только витая пара (TX) </TD>
          <TD>200 м </TD>
          <TD>100 м</TD></TR>
        <TR>
          <TD>Только оптоволокно (FX) </TD>
          <TD>272 м </TD>
          <TD>136 м</TD></TR>
        <TR>
          <TD>Несколько сегментов на витой паре и один на оптоволокне 260 м 
</TD>
          <TD>100 м (TX) </TD>
          <TD>160 м (FX)</TD></TR>
        <TR>
          <TD>Несколько сегментов на витой паре и несколько сегментов на 
            оптоволокне 272 м </TD>
          <TD>100 м (TX) </TD>
          <TD>136 м (FX)</TD></TR></TBODY></TABLE>
      <P align=justify>Эти ограничения проиллюстрированы типовыми конфигурациями 
      сетей, показанными на рисунке 30. 
      <CENTER>
  <P><img src="images/2_030.gif" width="533" height="351"> 
  <P><I>Рис. 30. Примеры построения сети с помощью повторителей класса I</I>
  
</CENTER>
<p> <a href="lection_18.htm">Назад</a> | <a href="index.htm">Содержание</a> | 
  <a href="lection_20.htm">Вперед</a>
</body>
</html>
