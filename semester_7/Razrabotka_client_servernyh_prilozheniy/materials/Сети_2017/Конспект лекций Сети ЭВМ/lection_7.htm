<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Адресация в IP - сетях</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
</head>

<body>
<h2 align="justify">7.Адресация в IP-сетях</h2>
<h3 align="justify"> <a name="7_1"></a>7.1. Типы адресов: физический (MAC-адрес), 
  сетевой (IP-адрес) и символьный (DNS-имя)</h3>
<p align="justify"> Каждый компьютер в сети TCP/IP имеет адреса трех уровней: 
</p>
<p align="justify"><em>Локальный адрес</em> узла, определяемый технологией, с 
  помощью которой построена отдельная сеть, в которую входит данный узел. Для 
  узлов, входящих в локальные сети - это МАС-адрес сетевого адаптера или порта 
  маршрутизатора, например, 11-А0-17-3D-BC-01. Эти адреса назначаются производителями 
  оборудования и являются уникальными адресами, так как управляются централизовано. 
  Для всех существующих технологий локальных сетей МАС-адрес имеет формат 6 байтов: 
  старшие 3 байта - идентификатор фирмы производителя, а младшие 3 байта назначаются 
  уникальным образом самим производителем. Для узлов, входящих в глобальные сети, 
  такие как Х.25 или frame relay, локальный адрес назначается администратором 
  глобальной сети. <br>
  IP-адрес, состоящий из 4 байт, например, 109.26.17.100. Этот адрес используется 
  на сетевом уровне. Он назначается администратором во время конфигурирования 
  компьютеров и маршрутизаторов. IP-адрес состоит из двух частей: номера сети 
  и номера узла. Номер сети может быть выбран администратором произвольно, либо 
  назначен по рекомендации специального подразделения Internet (Network Information 
  Center, NIC), если сеть должна работать как составная часть Internet. Обычно 
  провайдеры услуг Internet получают диапазоны адресов у подразделений NIC, а 
  затем распределяют их между своими абонентами. </p>
<p align="justify"> <em>Номер узла в протоколе IP</em> назначается независимо 
  от локального адреса узла. Деление IP-адреса на поле номера сети и номера узла 
  - гибкое, и граница между этими полями может устанавливаться весьма произвольно. 
  Узел может входить в несколько IP-сетей. В этом случае узел должен иметь несколько 
  IP-адресов, по числу сетевых связей. Таким образом IP-адрес характеризует не 
  отдельный компьютер или маршрутизатор, а одно сетевое соединение. </p>
<p align="justify"> <em>Символьный идентификатор-имя</em>, например, SERV1.IBM.COM. 
  Этот адрес назначается администратором и состоит из нескольких частей, например, 
  имени машины, имени организации, имени домена. Такой адрес, называемый также 
  DNS-именем, используется на прикладном уровне, например, в протоколах FTP или 
  telnet. </p>
<h3 align="justify"> <a name="7_2"></a>7.2. Три основных класса IP-адресов</h3>
<p align="justify"> IP-адрес имеет длину 4 байта и обычно записывается в виде 
  четырех чисел, представляющих значения каждого байта в десятичной форме, и разделенных 
  точками, например: </p>
<p align="justify">128.10.2.30 - традиционная десятичная форма представления адреса, 
</p>
<p align="justify">10000000 00001010 00000010 00011110 - двоичная форма представления 
  этого же адреса. </p>
<p align="justify">На рисунке 3.1 показана структура IP-адреса. </p>
<p align="justify">Класс А </p>
<div align="justify">
  <table width="75%" border="1">
    <tr> 
      <td width="6%"><div align="center">0</div></td>
      <td width="49%"><div align="center">N сети</div></td>
      <td width="45%"><div align="center">N узла </div></td>
    </tr>
  </table>
</div>
<p align="justify"><br>
  Класс В </p>
<div align="justify">
  <table width="75%" border="1">
    <tr> 
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">0</div></td>
      <td width="43%"><div align="center">N сети</div></td>
      <td width="45%"><div align="center">N узла </div></td>
    </tr>
  </table>
</div>
<p align="justify"><br>
  Класс С </p>
<div align="justify">
  <table width="75%" border="1">
    <tr> 
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">0</div></td>
      <td width="37%"><div align="center">N сети</div></td>
      <td width="45%"><div align="center">N узла </div></td>
    </tr>
  </table>
</div>
<p align="justify"><br>
  Класс D </p>
<div align="justify">
  <table width="75%" border="1">
    <tr> 
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">0</div></td>
      <td width="76%"><div align="center">адрес группы multicast </div></td>
    </tr>
  </table>
</div>
<p align="justify"><br>
  Класс Е </p>
<div align="justify">
  <table width="75%" border="1">
    <tr> 
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">1</div></td>
      <td width="6%"><div align="center">1</div></td>
      <td width="14%"><div align="center">0</div></td>
      <td width="62%"><div align="center">зарезервирован </div></td>
    </tr>
  </table>
</div>
<p align="justify"><br>
  Рис. 3.1. Структура IР-адреса </p>
<p align="justify">Адрес состоит из двух логических частей - номера сети и номера 
  узла в сети. Какая часть адреса относится к номеру сети, а какая к номеру узла, 
  определяется значениями первых битов адреса: </p>
<p align="justify">Если адрес начинается с 0, то сеть относят к классу А, и номер 
  сети занимает один байт, остальные 3 байта интерпретируются как номер узла в 
  сети. Сети класса А имеют номера в диапазоне от 1 до 126. (Номер 0 не используется, 
  а номер 127 зарезервирован для специальных целей, о чем будет сказано ниже.) 
  В сетях класса А количество узлов должно быть больше 216 , но не превышать 224. 
  <br>
  Если первые два бита адреса равны 10, то сеть относится к классу В и является 
  сетью средних размеров с числом узлов 28 - 216. В сетях класса В под адрес сети 
  и под адрес узла отводится по 16 битов, то есть по 2 байта. <br>
  Если адрес начинается с последовательности 110, то это сеть класса С с числом 
  узлов не больше 28. Под адрес сети отводится 24 бита, а под адрес узла - 8 битов. 
  <br>
  Если адрес начинается с последовательности 1110, то он является адресом класса 
  D и обозначает особый, групповой адрес - multicast. Если в пакете в качестве 
  адреса назначения указан адрес класса D, то такой пакет должны получить все 
  узлы, которым присвоен данный адрес. <br>
  Если адрес начинается с последовательности 11110, то это адрес класса Е, он 
  зарезервирован для будущих применений. <br>
  В таблице приведены диапазоны номеров сетей, соответствующих каждому классу 
  сетей. </p>
<div align="justify">
  <TABLE width="100%" border=1>
    <TBODY>
      <TR> 
        <TD align=middle colSpan=34><B>Класс</B> 
        <TD align=left colSpan=65><B>Наименьший адрес</B> 
        <TD align=left colSpan=58><B>Наибольший адрес</B> 
      <TR> 
        <TD align=middle colSpan=34><B>A</B> 
        <TD align=left colSpan=65>01.0.0 
        <TD align=left colSpan=58>126.0.0.0 
      <TR> 
        <TD align=middle colSpan=34><B>B</B> 
        <TD align=left colSpan=65>128.0.0.0 
        <TD align=left colSpan=58>191.255.0.0 
      <TR> 
        <TD align=middle colSpan=34><B>C</B> 
        <TD align=left colSpan=65>192.0.1.0. 
        <TD align=left colSpan=58>223.255.255.0 
      <TR> 
        <TD align=middle colSpan=34><B>D</B> 
        <TD align=left colSpan=65>224.0.0.0 
        <TD align=left colSpan=58>239.255.255.255 
      <TR> 
        <TD align=middle colSpan=34><B>E</B> 
        <TD align=left colSpan=65>240.0.0.0 
        <TD align=left colSpan=58>247.255.255.255 </TR>
    </TBODY>
  </TABLE>
</div>
<h3 align="justify"> <a name="7_3"></a>7.3. Соглашения о специальных адресах: 
  broadcast, multicast, loopback</h3>
<p align="justify"> В протоколе IP существует несколько соглашений об особой интерпретации 
  IP-адресов: </p>
<p align="justify">если IР-адрес состоит только из двоичных нулей, 
<div align="justify">
  <TABLE width="100%" border=1>
    <TBODY>
      <TR> 
        <TD colSpan=72>0 0 0 0 ................................... 0 0 0 0 
      <TR> 
        <TD></TR>
    </TBODY>
  </TABLE>
</div>
<p align="justify">то он обозначает адрес того узла, который сгенерировал этот 
  пакет; <br>
  если в поле номера сети стоят 0,</p>
<div align="justify">
  <TABLE width="100%" border=1>
    <TBODY>
      <TR> 
        <TD colSpan=36>0 0 0 0 .......0 
        <TD colSpan=36>Номер узла </TR>
    </TBODY>
  </TABLE>
  то по умолчанию считается, что этот узел принадлежит той же самой сети, что 
  и узел, который отправил пакет; <br>
  если все двоичные разряды IP-адреса равны 1, <br>
  <TABLE width="100%" border=1>
    <TBODY>
      <TR> 
        <TD colSpan=72>1 1 1 1 .........................................1 1 
      <TR> 
        <TD></TR>
    </TBODY>
  </TABLE>
  то пакет с таким адресом назначения должен рассылаться всем узлам, находящимся 
  в той же сети, что и источник этого пакета. Такая рассылка называется ограниченным 
  широковещательным сообщением (limited broadcast); <br>
  если в поле адреса назначения стоят сплошные 1, <br>
  <TABLE width="100%" border=1>
    <TBODY>
      <TR> 
        <TD colSpan=36>Номер сети 
        <TD colSpan=36>1111................11 </TR>
    </TBODY>
  </TABLE>
  то пакет, имеющий такой адрес рассылается всем узлам сети с заданным номером. 
  Такая рассылка называется широковещательным сообщением (broadcast); <br>
  адрес 127.0.0.1 зарезервирован для организации обратной связи при тестировании 
  работы программного обеспечения узла без реальной отправки пакета по сети. Этот 
  адрес имеет название loopback. <br>
  Уже упоминавшаяся форма группового IP-адреса - multicast - означает, что данный 
  пакет должен быть доставлен сразу нескольким узлам, которые образуют группу 
  с номером, указанным в поле адреса. Узлы сами идентифицируют себя, то есть определяют, 
  к какой из групп они относятся. Один и тот же узел может входить в несколько 
  групп. Такие сообщения в отличие от широковещательных называются мультивещательными. 
  Групповой адрес не делится на поля номера сети и узла и обрабатывается маршрутизатором 
  особым образом. </p> </p> </div>
<p align="justify">В протоколе IP нет понятия широковещательности в том смысле, 
  в котором оно используется в протоколах канального уровня локальных сетей, когда 
  данные должны быть доставлены абсолютно всем узлам. Как ограниченный широковещательный 
  IP-адрес, так и широковещательный IP-адрес имеют пределы распространения в интерсети 
  - они ограничены либо сетью, к которой принадлежит узел - источник пакета, либо 
  сетью, номер которой указан в адресе назначения. Поэтому деление сети с помощью 
  маршрутизаторов на части локализует широковещательный шторм пределами одной 
  из составляющих общую сеть частей просто потому, что нет способа адресовать 
  пакет одновременно всем узлам всех сетей составной сети. </p>
<h3 align="justify"><a name="7_4"></a>7.4. Отображение физических адресов на IP-адреса: 
  протоколы ARP и RARP</h3>
<p align="justify"> В протоколе IP-адрес узла, то есть адрес компьютера или порта 
  маршрутизатора, назначается произвольно администратором сети и прямо не связан 
  с его локальным адресом, как это сделано, например, в протоколе IPX. Подход, 
  используемый в IP, удобно использовать в крупных сетях и по причине его независимости 
  от формата локального адреса, и по причине стабильности, так как в противном 
  случае, при смене на компьютере сетевого адаптера это изменение должны бы были 
  учитывать все адресаты всемирной сети Internet (в том случае, конечно, если 
  сеть подключена к Internet'у). </p>
<p align="justify">Локальный адрес используется в протоколе IP только в пределах 
  локальной сети при обмене данными между маршрутизатором и узлом этой сети. Маршрутизатор, 
  получив пакет для узла одной из сетей, непосредственно подключенных к его портам, 
  должен для передачи пакета сформировать кадр в соответствии с требованиями принятой 
  в этой сети технологии и указать в нем локальный адрес узла, например его МАС-адрес. 
  В пришедшем пакете этот адрес не указан, поэтому перед маршрутизатором встает 
  задача поиска его по известному IP-адресу, который указан в пакете в качестве 
  адреса назначения. С аналогичной задачей сталкивается и конечный узел, когда 
  он хочет отправить пакет в удаленную сеть через маршрутизатор, подключенный 
  к той же локальной сети, что и данный узел. </p>
<p align="justify">Для определения локального адреса по IP-адресу используется 
  протокол разрешения адреса Address Resolution Protocol, ARP. Протокол ARP работает 
  различным образом в зависимости от того, какой протокол канального уровня работает 
  в данной сети - протокол локальной сети (Ethernet, Token Ring, FDDI) с возможностью 
  широковещательного доступа одновременно ко всем узлам сети, или же протокол 
  глобальной сети (X.25, frame relay), как правило не поддерживающий широковещательный 
  доступ. Существует также протокол, решающий обратную задачу - нахождение IP-адреса 
  по известному локальному адресу. Он называется реверсивный ARP - RARP (Reverse 
  Address Resolution Protocol) и используется при старте бездисковых станций, 
  не знающих в начальный момент своего IP-адреса, но знающих адрес своего сетевого 
  адаптера. </p>
<p align="justify">В локальных сетях протокол ARP использует широковещательные 
  кадры протокола канального уровня для поиска в сети узла с заданным IP-адресом. 
</p>
<p align="justify">Узел, которому нужно выполнить отображение IP-адреса на локальный 
  адрес, формирует ARP запрос, вкладывает его в кадр протокола канального уровня, 
  указывая в нем известный IP-адрес, и рассылает запрос широковещательно. Все 
  узлы локальной сети получают ARP запрос и сравнивают указанный там IP-адрес 
  с собственным. В случае их совпадения узел формирует ARP-ответ, в котором указывает 
  свой IP-адрес и свой локальный адрес и отправляет его уже направленно, так как 
  в ARP запросе отправитель указывает свой локальный адрес. ARP-запросы и ответы 
  используют один и тот же формат пакета. Так как локальные адреса могут в различных 
  типах сетей иметь различную длину, то формат пакета протокола ARP зависит от 
  типа сети. На рисунке 3.2 показан формат пакета протокола ARP для передачи по 
  сети Ethernet. </p>
<p align="justify">0 8 16 31</p>
<div align="justify">
  <TABLE width="100%" border=1>
    <TBODY>
      <TR> 
        <TD colSpan=89><B>Тип сети</B> 
        <TD colSpan=68><B>Тип протокола</B> 
      <TR> 
        <TD align=left colSpan=49>Длина локального адреса 
        <TD align=left colSpan=40>Длина сетевого адреса 
        <TD align=left colSpan=68>Операция 
      <TR> 
        <TD colSpan=157>Локальный адрес отправителя (байты 0 - 3) 
      <TR> 
        <TD colSpan=89>Локальный адрес отправителя (байты 4 - 5) 
        <TD colSpan=68>IP-адрес отправителя (байты 0-1) 
      <TR> 
        <TD colSpan=89>IP-адрес отправителя (байты 2-3) 
        <TD colSpan=68>Искомый локальный адрес (байты 0 - 1) 
      <TR> 
        <TD colSpan=157>Искомый локальный адрес (байты 2-5) 
      <TR> 
        <TD colSpan=157>Искомый IP-адрес (байты 0 - 3) </TR>
    </TBODY>
  </TABLE>
</div>
<p align="justify"> Рис. 3.2. Формат пакета протокола ARP </p>
<p align="justify">В поле типа сети для сетей Ethernet указывается значение 1. 
  Поле типа протокола позволяет использовать пакеты ARP не только для протокола 
  IP, но и для других сетевых протоколов. Для IP значение этого поля равно 080016. 
</p>
<p align="justify">Длина локального адреса для протокола Ethernet равна 6 байтам, 
  а длина IP-адреса - 4 байтам. В поле операции для ARP запросов указывается значение 
  1 для протокола ARP и 2 для протокола RARP. </p>
<p align="justify">Узел, отправляющий ARP-запрос, заполняет в пакете все поля, 
  кроме поля искомого локального адреса (для RARP-запроса не указывается искомый 
  IP-адрес). Значение этого поля заполняется узлом, опознавшим свой IP-адрес. 
</p>
<p align="justify">В глобальных сетях администратору сети чаще всего приходится 
  вручную формировать ARP-таблицы, в которых он задает, например, соответствие 
  IP-адреса адресу узла сети X.25, который имеет смысл локального адреса. В последнее 
  время наметилась тенденция автоматизации работы протокола ARP и в глобальных 
  сетях. Для этой цели среди всех маршрутизаторов, подключенных к какой-либо глобальной 
  сети, выделяется специальный маршрутизатор, который ведет ARP-таблицу для всех 
  остальных узлов и маршрутизаторов этой сети. При таком централизованном подходе 
  для всех узлов и маршрутизаторов вручную нужно задать только IP-адрес и локальный 
  адрес выделенного маршрутизатора. Затем каждый узел и маршрутизатор регистрирует 
  свои адреса в выделенном маршрутизаторе, а при необходимости установления соответствия 
  между IP-адресом и локальным адресом узел обращается к выделенному маршрутизатору 
  с запросом и автоматически получает ответ без участия администратора. </p>
<h3 align="justify"><a name="7_5"></a>7.5. Отображение символьных адресов на IP-адреса: 
  служба DNS</h3>
<p align="justify"> DNS (Domain Name System) - это распределенная база данных, 
  поддерживающая иерархическую систему имен для идентификации узлов в сети Internet. 
  Служба DNS предназначена для автоматического поиска IP-адреса по известному 
  символьному имени узла. Спецификация DNS определяется стандартами RFC 1034 и 
  1035. DNS требует статической конфигурации своих таблиц, отображающих имена 
  компьютеров в IP-адрес. </p>
<p align="justify">Протокол DNS является служебным протоколом прикладного уровня. 
  Этот протокол несимметричен - в нем определены DNS-серверы и DNS-клиенты. DNS-серверы 
  хранят часть распределенной базы данных о соответствии символьных имен и IP-адресов. 
  Эта база данных распределена по административным доменам сети Internet. Клиенты 
  сервера DNS знают IP-адрес сервера DNS своего административного домена и по 
  протоколу IP передают запрос, в котором сообщают известное символьное имя и 
  просят вернуть соответствующий ему IP-адрес. </p>
<p align="justify">Если данные о запрошенном соответствии хранятся в базе данного 
  DNS-сервера, то он сразу посылает ответ клиенту, если же нет - то он посылает 
  запрос DNS-серверу другого домена, который может сам обработать запрос, либо 
  передать его другому DNS-серверу. Все DNS-серверы соединены иерархически, в 
  соответствии с иерархией доменов сети Internet. Клиент опрашивает эти серверы 
  имен, пока не найдет нужные отображения. Этот процесс ускоряется из-за того, 
  что серверы имен постоянно кэшируют информацию, предоставляемую по запросам. 
  Клиентские компьютеры могут использовать в своей работе IP-адреса нескольких 
  DNS-серверов, для повышения надежности своей работы. </p>
<p align="justify">База данных DNS имеет структуру дерева, называемого доменным 
  пространством имен, в котором каждый домен (узел дерева) имеет имя и может содержать 
  поддомены. Имя домена идентифицирует его положение в этой базе данных по отношению 
  к родительскому домену, причем точки в имени отделяют части, соответствующие 
  узлам домена. </p>
<p align="justify">Корень базы данных DNS управляется центром Internet Network 
  Information Center. Домены верхнего уровня назначаются для каждой страны, а 
  также на организационной основе. Имена этих доменов должны следовать международному 
  стандарту ISO 3166. Для обозначения стран используются трехбуквенные и двухбуквенные 
  аббревиатуры, а для различных типов организаций используются следующие аббревиатуры: 
</p>
<p align="justify">com - коммерческие организации (например, microsoft.com); <br>
  edu - образовательные (например, mit.edu); <br>
  gov - правительственные организации (например, nsf.gov); <br>
  org - некоммерческие организации (например, fidonet.org); <br>
  net - организации, поддерживающие сети (например, nsf.net). <br>
  Каждый домен DNS администрируется отдельной организацией, которая обычно разбивает 
  свой домен на поддомены и передает функции администрирования этих поддоменов 
  другим организациям. Каждый домен имеет уникальное имя, а каждый из поддоменов 
  имеет уникальное имя внутри своего домена. Имя домена может содержать до 63 
  символов. Каждый хост в сети Internet однозначно определяется своим полным доменным 
  именем (fully qualified domain name, FQDN), которое включает имена всех доменов 
  по направлению от хоста к корню. Пример полного DNS-имени : citint.dol.ru. </p>
<h3 align="justify"><a name="7_6"></a>7.6. Автоматизация процесса назначения IP-адресов 
  узлам сети - протокол DHCP</h3>
<p align="justify"> Как уже было сказано, IP-адреса могут назначаться администратором 
  сети вручную. Это представляет для администратора утомительную процедуру. Ситуация 
  усложняется еще тем, что многие пользователи не обладают достаточными знаниями 
  для того, чтобы конфигурировать свои компьютеры для работы в интерсети и должны 
  поэтому полагаться на администраторов. </p>
<p align="justify">Протокол Dynamic Host Configuration Protocol (DHCP) был разработан 
  для того, чтобы освободить администратора от этих проблем. Основным назначением 
  DHCP является динамическое назначение IP-адресов. Однако, кроме динамического, 
  DHCP может поддерживать и более простые способы ручного и автоматического статического 
  назначения адресов. </p>
<p align="justify">В ручной процедуре назначения адресов активное участие принимает 
  администратор, который предоставляет DHCP-серверу информацию о соответствии 
  IP-адресов физическим адресам или другим идентификаторам клиентов. Эти адреса 
  сообщаются клиентам в ответ на их запросы к DHCP-серверу. </p>
<p align="justify">При автоматическом статическом способе DHCP-сервер присваивает 
  IP-адрес (и, возможно, другие параметры конфигурации клиента) из пула наличных 
  IP-адресов без вмешательства оператора. Границы пула назначаемых адресов задает 
  администратор при конфигурировании DHCP-сервера. Между идентификатором клиента 
  и его IP-адресом по-прежнему, как и при ручном назначении, существует постоянное 
  соответствие. Оно устанавливается в момент первичного назначения сервером DHCP 
  IP-адреса клиенту. При всех последующих запросах сервер возвращает тот же самый 
  IP-адрес. </p>
<p align="justify">При динамическом распределении адресов DHCP-сервер выдает адрес 
  клиенту на ограниченное время, что дает возможность впоследствии повторно использовать 
  IP-адреса другими компьютерами. Динамическое разделение адресов позволяет строить 
  IP-сеть, количество узлов в которой намного превышает количество имеющихся в 
  распоряжении администратора IP-адресов. </p>
<p align="justify">DHCP обеспечивает надежный и простой способ конфигурации сети 
  TCP/IP, гарантируя отсутствие конфликтов адресов за счет централизованного управления 
  их распределением. Администратор управляет процессом назначения адресов с помощью 
  параметра &quot;продолжительности аренды&quot; (lease duration), которая определяет, 
  как долго компьютер может использовать назначенный IP-адрес, перед тем как снова 
  запросить его от сервера DHCP в аренду. </p>
<p align="justify">Примером работы протокола DHCP может служить ситуация, когда 
  компьютер, являющийся клиентом DHCP, удаляется из подсети. При этом назначенный 
  ему IP-адрес автоматически освобождается. Когда компьютер подключается к другой 
  подсети, то ему автоматически назначается новый адрес. Ни пользователь, ни сетевой 
  администратор не вмешиваются в этот процесс. Это свойство очень важно для мобильных 
  пользователей. </p>
<p align="justify">Протокол DHCP использует модель клиент-сервер. Во время старта 
  системы компьютер-клиент DHCP, находящийся в состоянии &quot;инициализация&quot;, 
  посылает сообщение discover (исследовать), которое широковещательно распространяется 
  по локальной сети и передается всем DHCP-серверам частной интерсети. Каждый 
  DHCP-сервер, получивший это сообщение, отвечает на него сообщением offer (предложение), 
  которое содержит IP-адрес и конфигурационную информацию. </p>
<p align="justify">Компьютер-клиент DHCP переходит в состояние &quot;выбор&quot; 
  и собирает конфигурационные предложения от DHCP-серверов. Затем он выбирает 
  одно из этих предложений, переходит в состояние &quot;запрос&quot; и отправляет 
  сообщение request (запрос) тому DHCP-серверу, чье предложение было выбрано. 
</p>
<p align="justify">Выбранный DHCP-сервер посылает сообщение DHCP-acknowledgment 
  (подтверждение), содержащее тот же IP-адрес, который уже был послан ранее на 
  стадии исследования, а также параметр аренды для этого адреса. Кроме того, DHCP-сервер 
  посылает параметры сетевой конфигурации. После того, как клиент получит это 
  подтверждение, он переходит в состояние &quot;связь&quot;, находясь в котором 
  он может принимать участие в работе сети TCP/IP. Компьютеры-клиенты, которые 
  имеют локальные диски, сохраняют полученный адрес для использования при последующих 
  стартах системы. При приближении момента истечения срока аренды адреса компьютер 
  пытается обновить параметры аренды у DHCP-сервера, а если этот IP-адрес не может 
  быть выделен снова, то ему возвращается другой IP-адрес. </p>
<p align="justify">В протоколе DHCP описывается несколько типов сообщений, которые 
  используются для обнаружения и выбора DHCP-серверов, для запросов информации 
  о конфигурации, для продления и досрочного прекращения лицензии на IP-адрес. 
  Все эти операции направлены на то, чтобы освободить администратора сети от утомительных 
  рутинных операций по конфигурированию сети. </p>
<p align="justify">Однако использование DHCP несет в себе и некоторые проблемы. 
  Во-первых, это проблема согласования информационной адресной базы в службах 
  DHCP и DNS. Как известно, DNS служит для преобразования символьных имен в IP-адреса. 
  Если IP-адреса будут динамически изменятся сервером DHCP, то эти изменения необходимо 
  также динамически вносить в базу данных сервера DNS. Хотя протокол динамического 
  взаимодействия между службами DNS и DHCP уже реализован некоторыми фирмами (так 
  называемая служба Dynamic DNS), стандарт на него пока не принят. </p>
<p align="justify">Во-вторых, нестабильность IP-адресов усложняет процесс управления 
  сетью. Системы управления, основанные на протоколе SNMP, разработаны с расчетом 
  на статичность IP-адресов. Аналогичные проблемы возникают и при конфигурировании 
  фильтров маршрутизаторов, которые оперируют с IP-адресами. </p>
<p align="justify">Наконец, централизация процедуры назначения адресов снижает 
  надежность системы: при отказе DHCP-сервера все его клиенты оказываются не в 
  состоянии получить IP-адрес и другую информацию о конфигурации. Последствия 
  такого отказа могут быть уменьшены путем использовании в сети нескольких серверов 
  DHCP, каждый из которых имеет свой пул IP-адресов. </p>
<p align="justify"><a href="lection_6.htm">Назад</a> | <a href="index.htm">Содержание</a> 
  | <a href="lection_8.htm">Вперед</a></p>
</body>
</html>
