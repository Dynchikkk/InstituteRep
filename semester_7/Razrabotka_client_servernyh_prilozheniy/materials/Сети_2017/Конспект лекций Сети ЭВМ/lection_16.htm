<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Протокол LLC уровня управления логическим каналом</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
</head>

<body>
<H2>16. Протокол LLC уровня управления логическим каналом</H2>
      <P align=justify>В основу протокола LLC положен протокол HDLC (High-level 
      Data Link Control Procedure), широко использующийся в территориальных 
      сетях. 
      
<H3><a name="16_1"></a>16.1. Три типа процедур уровня LLC</H3>
      <P align=justify>В соответствии со стандартом 802.2 уровень управления 
      логическим каналом LLC предоставляет верхним уровням три типа процедур: 
      <UL>
        <LI>LLC1 - сервис без установления соединения и без подтверждения; 
        <LI>LLC2 - сервис с установлением соединения и подтверждением; 
        <LI>LLC3 - сервис без установления соединения, но с подтверждением. 
      </LI></UL>
      <P align=justify>Этот набор процедур является общим для всех методов 
      доступа к среде, определенных стандартами 802.3-802.5. 
      <P align=justify><I>Сервис без установления соединения и без подтверждения 
      LLC1</I> дает пользователю средства для передачи данных с минимумом 
      издержек. Обычно, этот вид сервиса используется тогда, когда такие функции 
      как восстановление данных после ошибок и упорядочивание данных выполняются 
      протоколами вышележащих уровней, поэтому нет нужды дублировать их на 
      уровне LLC. 
      <P align=justify><I>Сервис с установлением соединений и с подтверждением 
      LLC2</I> дает пользователю возможность установить логическое соединение 
      перед началом передачи любого блока данных и, если это требуется, 
      выполнить процедуры восстановления после ошибок и упорядочивание потока 
      этих блоков в рамках установленного соединения. Протокол LLC2 во многом 
      аналогичен протоколам семейства HDLC (LAP-B, LAP-D, LAP-M), которые 
      применяются в глобальных сетях для обеспечения надежной передачи кадров на 
      зашумленных линиях. 
      <P align=justify>В некоторых случаях (например, при использовании сетей в 
      системах реального времени, управляющих промышленными объектами), когда 
      временные издержки установления логического соединения перед отправкой 
      данных неприемлемы, а подтверждение корректности приема переданных данных 
      необходимо, базовый сервис без установления соединения и без подтверждения 
      не подходит. Для таких случаев предусмотрен дополнительный сервис, 
      называемый сервисом <I>без установления соединения, но с подтверждением 
      LLC3</I>. 
      
<P align=justify>Чаще всего в локальных сетях используются протоколы LLC1. Это 
  объясняется тем, что кабельные каналы локальных сетей обеспечивают низкую вероятность 
  искажений бит и потери кадров. Поэтому, использование повышающего надежность 
  обмена протокола LLC2 часто приводит к неоправданной избыточности, только замедляющей 
  общую пропускную способность стека коммуникационных протоколов. Тем не менее, 
  иногда протокол LLC2 применяется и в локальных сетях. Так, этот протокол используется 
  стеком SNA в том случае, когда мэйнфремы или миникомпьютеры IBM взаимодействуют 
  через сети Token Ring. Протокол LLC2 используется также компанией Hewlett-Packard 
  в том случае, когда принтеры подключается к сети Ethernet непосредственно, с 
  помощью встроенных сетевых адаптеров. 
  
<H3><a name="16_2"></a>16.2. Структура кадров LLC</H3>
      <P align=justify>По своему назначению все кадры уровня LLC (называемые в 
      стандарте 802.2 блоками данных - Protocol Data Unit, PDU) подразделяются 
      на три типа - информационные, управляющие и ненумерованные: 
      <UL>
        <LI><I>Информационные кадры</I> предназначены для передачи информации в 
        процедурах с установлением логического соединения и должны обязательно 
        содержать поле информации. В процессе передачи информационных блоков 
        осуществляется их нумерация в режиме скользящего окна. 
        <LI><I>Управляющие кадры</I> предназначены для передачи команд и ответов 
        в процедурах с установлением логического соединения, в том числе 
        запросов на повторную передачу искаженных информационных блоков. 
        <LI><I>Ненумерованные кадры</I> предназначены для передачи 
        ненумерованных команд и ответов, выполняющих в процедурах без 
        установления логического соединения передачу информации, идентификацию и 
        тестирование LLC-уровня, а в процедурах с установлением логического 
        соединения - установление и разъединение логического соединения, а также 
        информирование об ошибках. </LI></UL>
      <P align=justify>Все типы кадров уровня LLC имеют единый формат (рис. 1). 
      Они содержат четыре поля: 
      <UL>
        <LI>адрес точки входа сервиса назначения (Destination Service Access 
        Point, DSAP), 
        <LI>адрес точки входа сервиса источника (Source Service Access Point, 
        SSAP), 
        <LI>управляющее поле (Control) 
        <LI>поле данных (Data) </LI></UL>
      <P align=justify>Кадр LLC обрамляется двумя однобайтовыми полями "Флаг", 
      имеющими значение 01111110. Флаги используются на MAC-уровне для 
      определения границ блока. (Отметим, что формат кадров LLC, за исключением 
      поля адреса точки входа сервиса источника, соответствует формату кадра 
      HDLC, а также одного из вариантов протокола HDLC - протокола LAP-B, 
      используемого в сетях X.25). 
      <CENTER>
      <P>
      <P>&nbsp; 
      <TABLE cellPadding=5 width=500 border=1>
        <TBODY>
        <TR vAlign=top>
          <TD bgColor=#eeeeee>Флаг (01111110)</TD>
          <TD>Адрес точки входа сервиса назначения DSAP</TD>
          <TD>Адрес точки входа сервиса источника SSAP</TD>
          <TD>Управляющее поле Control</TD>
          <TD>Данные Data</TD>
          <TD bgColor=#eeeeee>Флаг (01111110)</TD></TR></TBODY></TABLE>
      <P><I>рис. 1. Структура LLC-кадра стандарта 802-2</I> </CENTER>
      <P align=justify><I>Поле данных кадра</I> LLC предназначено для передачи 
      по сети пакетов протоколов верхних уровней - IP, IPX, AppleTalk, DECnet, в 
      редких случаях - прикладных протоколов, когда те не пользуются сетевыми 
      протоколами, а вкладывают свои сообщения непосредственно в кадры 
      канального уровня. Поле данных может отсутствовать в управляющих кадрах и 
      некоторых ненумерованных кадрах. 
      <P align=justify><I>Поле управления</I> (один байт) используется для 
      обозначения типа кадра данных - информационный, управляющий или 
      ненумерованный. Кроме этого, в этом поле указываются порядковые номера 
      отправленных и успешно принятых кадров, если подуровень LLC работает по 
      процедуре LLC2 с установлением соединения. Формат поля управления 
      полностью совпадает с форматом поля управления кадра LAP-B. 
      <P align=justify><I>Поля DSAP и SSAP</I> позволяют указать, какой сервис 
      верхнего уровня пересылает данные с помощью этого кадра. Программному 
      обеспечению узлов сети при получении кадров канального уровня необходимо 
      распознать, какой протокол вложил свой пакет в поле данных поступившего 
      кадра, для того, чтобы передать извлеченный из кадра пакет нужному 
      протоколу для последующей обработки. Например, в качестве значения DSAP и 
      SSAP может выступать код протокола IPX или же код протокола покрывающего 
      дерева Spanning Tree. 
	   
<h3><a name="16_3"></a>16.3. Заголовок SNAP</h3>
      <P align=justify>Между заголовком LLC и полем данных LLC может 
      использоваться дополнительный заголовок, называемый <I>заголовком SNAP</I> 
      (Sub-Area Access Protocol). Дополнительный заголовок SNAP используется для 
      придания большей упорядоченности при указании типа протокола, который 
      помещает свою информацию в поле данных кадра LLC. 
      <P align=justify>Стандарт 802.2 использует для этой цели однобайтовые поля 
      DSAP и SSAP, в то время как ранняя версия протокола Ethernet, предложенная 
      совместно компаниями Digital, Intel и Xerox (так называемая, версия 
      Ethernet DIX), использовала для этой цели двухбайтовое поле Type, для 
      которого в качестве стандарта де-факто применялись двухбайтовые коды 
      протоколов сетевого уровня, например, 0800 - для протокола IP и т.п. 
      <P align=justify>Заголовок SNAP также содержит двухбайтовое поле Type, 
      назначение и формат которого совпадает по назначению с полем Type кадра 
      Ethernet DIX. Трехбайтовый код организации (OUI) используется для указания 
      той организации по стандартизации, которая отвечает за числовые значения 
      поля Type. Так, числовые значения поля Type для заголовка SNAP в случае 
      использования его в кадрах Ethernet определяет комитет 802.3 IEEE, код 
      которого равен 00 00 00. 
      <P align=justify>Для других протоколов канального уровня значения кодов 
      поля Type определяют другие организации по стандартизации. Таким образом, 
      при использовании дополнительного заголовка SNAP достигается совместимость 
      кадров 802.3 с кадрами Ethernet DIX по способу кодирования пакетов 
      протоколов верхнего уровня, переносимых в поле данных. В поля DSAP и SSAP 
      при использовании заголовка SNAP помещаются значения 170 (десятичное), 
      которые говорят о том, что в поле данных кадра LLC вложен заголовок SNAP. 
	   
<h3><a name="16_4"></a>16.4. Временная диаграмма сервисов протокола LLC</h3>
      <P align=justify>На рисунке 2 показана временная диаграмма сервисов, 
      предоставляемых уровнем LLC для старших уровней. Все примитивы, 
      изображенные на рисунке, имеют такие параметры, как адреса отправителя и 
      получателя. 
      <P align=justify>При использовании сервиса без установления соединения и 
      без подтверждения протокол LLC, получив запрос от пользователя (примитив 
      L.DATA.request) на передачу данных, делает попытку послать данные, 
      сопровождающие запрос, используя МАС-подуровень. В этом случае отсутствует 
      подтверждение того, прошла ли передача успешно или нет. В этом варианте 
      функции уровня LLC сведены к минимуму - он используется только как 
      интерфейс старших уровней к MAC-уровню. При использовании этого типа 
      сервиса используются только ненумерованные блоки. 
      <P align=justify>При использовании сервиса без установления соединения, но 
      с подтверждением, пользователь оповещается об успешности или не успешности 
      передачи данных (примитив L.DATA_ACK_STATUS.indication). 
      <P align=justify>При использовании сервиса с получением ответа 
      используются следующие примитивы: 
      <UL>
        <LI>Запрос содержимого буфера сообщения, управляемого протоколом LLC 
        удаленного пользователя: L.REPLY.request и L.REPLY_STATUS.indication; 
        <LI>Обновление содержимого буфера сообщения, управляемого протоколом LLC 
        локального пользователя: L.REPLY_UPDATE.request и 
        L.REPLY_UPDATE_STATUS.indication. </LI></UL>
      <P align=justify>При использовании сервиса с установлением соединения 
      перед отправкой любых данных должно быть установлено логическое соединение 
      посредством выполнения примитива L.CONNECT. После того, как в рамках этого 
      соединения будут переданы все данные, соединение должно быть разорвано с 
      использованием примитива L.DISCONNECT. 
      <P align=justify>Во время фазы передачи данных прием каждого свободного от 
      ошибок блока данных подтверждается удаленным протоколом LLC. Это 
      подтверждение преобразуется локальным протоколом LLC в примитив 
      L.DATA_CONNECT.confirm и передается пользователю. 
<P align=justify><a href="lection_15.htm">Назад</a> | <a href="index.htm">Содержание</a> 
  | <a href="lection_17.htm">Вперед </a>
</body>
</html>
