<html>

<!-- Mirrored from www.habarov.spb.ru/lab_net/Network_Simulate/NetSimulate/lab1.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Dec 2017 18:26:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=WINDOWS-1251" /><!-- /Added by HTTrack -->
<head>
<title>Моделирование работы IP-сетей - Адресация и простейшая маршрутизации в IP-сетях</title>
<LINK href="../style.css" rel=stylesheet type=text/css>
<script SRC="../menu.js">
     document.write("Included JS file not found");
</script> 
</head>

<body class="MainText">
<script>Main_Menu();</script>

<h5>1. Лабораторная работа №1. "Адресация и простейшая маршрутизации в IP-сетях".</h5>
<ul><li>Цель работы:
<p>Изучение и практическое освоение основ адресации,
разрешения физических адресов и простейшей маршрутизации в IP-
сетях.
</li><li>Порядок выполнения работы:
  <ol><li>Исправить структуру сети (если это необходимо), обеспечив
корректную доставку кадров на физическом уровне.
  </li><li>Задать ip-адреса, маски подсети и шлюзы по-умолчанию для всех
  узлов сети, чтобы обеспечить корректную доставку эхо-запроса от
  K1 к K2 и эхо-ответа обратно. Обосновать свои установки.
  </li><li>Выполнить эхо-запрос с K1 на K2. Посмотреть вывод программы.
  </li><li>Добавить статическую запись ARP для K3 на K1. Подождать
  устаревания ARP-таблиц и выполнить эхо запрос с K1 на K2.
  Объяснить результат.
  </li><li>Выполнить эхо-запрос на IP-адрес 200.100.0.1 c K1. Объяснить
  вывод программы.
  </li><li>Выполнить эхо запросы с K1 и K2 на все узлы сети. Убедиться, что
  эхо-ответы приходят.
  </li></ol>
</li><li>В отчет необходимо включить схему сети, настройки протокола TCP/IP
для все узлов сети и результаты вывода программы полученные при
выполнении эхо-запросов.
</li></ul>

<h5>1.1. Пример выполнения лабораторной работы.</h5>

<ul><li>Исходные данные: 
  <ul><li>Файл со схемой сети: lab1_sample.jfst.
    </li><li>Заданная конфигурация сети имеет вид, приведенный на рис.1.1.
         <script>myRisBig("1_0.gif",'Рис. 1.1. Структура исследуемой сетевой архитектуры.',0);</script>
    </li><li>Сеть между маршрутизаторами R1 и R2: 172.168.100.0.
	</li><li>Компьютер PC1 имеет IP-адрес 172.168.0.2.
    </li><li>Компьютер PC2 имеет IP-адрес 10.0.0.2.
  </li></ul>

</li><li>Задание:
  <ol><li>Задать маски подсети и шлюзы по умолчанию для PC1 и PC2,
  а также IP-адреса из заданного диапазона вместе с масками и
  шлюзами для R1 и R2 так, чтобы обеспечить корректную доставку
  эхо-запроса от PC1 к PC2 и эхо-ответа обратно. Обосновать свои
  установки.
    </li><li>Выполнить эхо-запрос с PC1 на PC2. Проанализировать вывод
  программы.
    </li><li>Выполнить эхо-запрос на IP-адрес 192.168.0.1 c PC1. Объяснить
  вывод программы.
    </li></ol>
</li></ul>

<br>
<p><b>Порядок выполнения будет следующим:</b></p>
  <ol><li>Зададим IP-адреса и маски подсети для маршрутизаторов R1 и R2.
   <p>Как видно, сети 172.168.100.0 и 172.168.0.0 (если использовать
   стандартную маску подсети для класса B) эквивалентны. Будем
   использовать маску подсети, отличную от стандартной.
   <p>Зададим для маршрутизатора R1 на интерфейсе eth0 адрес 172.168.0.1
   и маску подсети 255.255.255.0. На интерфейсе eth1 установим
   адрес 172.168.100.1 и маску 255.255.255.0.
   <p>Теперь необходимо сконфигурировать маршрутизатор R2. На его
   интерфейсе eth0 зададим IP 172.168.100.2 и маску 255.255.255.0.
   Установим шлюз по умолчанию в 172.168.100.1. На интерфейсе eth1
   для R2 установим любой IP-адрес из диапазона сети PC2, например
   10.0.0.1 и соответствующую ему маску: 255.0.0.0.
   <p>Для корректной маршрутизации осталось задать только шлюз по
   умолчанию для R1. Он будет адресом маршрутизатора R2.

  </li><li>Теперь настроим конечные узлы.
  <p>На PC1 зададим маску подсети
  соответствующую новому адресному пространству – 255.255.255.0.
  Так как пакеты от узла PC1 в другие сети должны проходить
  через маршрутизатор R1, зададим шлюз по умолчанию 172.168.0.1
  (адрес R1).
  <p>Аналогичные операции проведем на PC2 – установим маску подсети
  в 255.0.0.0, а шлюз по умолчанию в 10.0.0.1. Стоит заметить, что
  приведенная конфигурация не является единственно верной.
     <center>
     <IMG border=0 align="center" src='Image/1_12.gif' title='Вид структуры сети, представляемой в отчет по ЛР'>
     </center> 

  </li><li>Выполним эхо-запроса с PC1 на PC2
  <p>Для этого на схеме сети выделим PC1, вызовем нажатием правой кнопки мышки 
     всплывающее меню и в нем выберем опцию "Send Ping ...". В появившемся окне
	 укажем IP-адрес PC2 и нажмем кнопку OK.  
  <p>После отправки эхо-запроса с PC1 на PC2 в консоли будет выведен
     результат прохождения запроса и ответа на него по сети:</p>
     <center>
     <IMG border=0 align="center" src='Image/1_11.gif' title=' Результат эхо-запроса с PC1 на PC2 '>
     </center>
  <p>Как видно из содержимого консоли, PC1 успешно получил эхо-ответ на свой запрос к PC2.</p>

  </li><li>Выполним эхо-запрос для несуществующего узла с IP-адресом 192.168.0.1.
  <p>Для этого выполним на PC1 последовательность
  действий, аналогичную предыдущему пункту, вместо адреса
  10.0.0.2 используя адрес 192.168.0.1:
<pre class="preText">
PC1 Created Echo Request packet to 192.168.0.1
PC1 Sending packet from ProtocolStack (to 172.168.0.1).
...
R1 ProtocolStack received packet from local Interface.
R1 Packet Received: Network Layer Device is Routable forwarding packet.
R1 Forwarding packet from ProtocolStack (to 172.168.100.1).
R2 ProtocolStack received packet from local Interface.
R2 Packet Dropped: Hop count exceeded.
Host 192.168.0.2 Unreachable
</pre>
  <p>Как видно, пакет попал в "петлю" между двумя маршрутизаторами
  и находился там, пока у него не закончилось время жизни (TTL).
</li></ol>

<h5>1.2. Контрольные вопросы.</h5>
</p><p>1. Что такое кэш ARP? Какие типы записей могут содержаться в кэше ARP?
</p><p>2. Какому классу IP-адресов принадлежат адреса 10.11.0.1, 127.1.1.1?
</p><p>3. Разделите адресное пространство 192.168.1.0 на 4 подсети при помощи масок.
</p><p>4. Что такое концентратор? Объясните принцип работы концентратора. Чем 
          концентратор отличается от повторителя?
</p><p>5. Что такое шлюз?
</p><p>6. Для чего предназначен протокол ICMP?
</p>

<hr /><br />

<h5>1.3. Варианты заданий.</h5>

<script>variant(1,1,[
"Сеть между маршрутизаторами R1, R2 и Boss_R: 117.168.0.0.",
"Компьютер Boss имеет IP-адрес 64.2.0.1.",
"Компьютер Hacker имеет IP-адрес 117.168.0.5.",
"Обозначения в задании: K1 – Boss, K2 – Hacker, K3 – OFFICE2 pc1."
]);</script>

<script>variant(1,2,[
"Сеть между маршрутизаторами OFF_R и R2: 136.15.0.0.",
"Компьютер BIG BOSS имеет IP-адрес 136.15.32.1.",
"Компьютер M_CH_S имеет IP-адрес 10.10.0.2.",
"Сеть между маршрутизаторами R2 и M_CH_S_Router: 192.178.0.0.",
"Обозначения в задании: K1 – BIG BOSS, K2 – M_CH_S, K3 – OFFICE1_pc4."
]);</script>

<script>variant(1,3,[
"Сеть между маршрутизаторами R1,R2 и Boss_R: 172.198.0.0.",
"Компьютер Boss имеет IP-адрес 10.2.0.1.",
"Компьютер Hacker имеет IP-адрес 172.198.99.252.",
"Обозначения в задании: K1 – Boss, K2 – Hacker, K3 – OFFICE2_pc1."
]);</script>

<script>variant(1,4,[
"Сеть между маршрутизаторами OFF_R и R2: 204.188.0.0.",
"Компьютер BIG BOSS имеет IP-адрес 204.188.0.1.",
"Компьютер M_CH_S имеет IP-адрес 10.0.0.2.",
"Сеть между маршрутизаторами R2 и M_CH_S_Router: 192.178.0.0.",
"Обозначения в задании: K1 – BIG BOSS, K2 – M_CH_S, K3 – OFFICE1_pc4."
]);</script>

<script>variant(1,5,[
"Сеть между маршрутизаторами RServers, RManagers и RBosses: 10.0.0.0.",
"Компьютер MegaBoss имеет IP-адрес 172.16.0.5.",
"Компьютер Manager2 имеет IP-адрес 172.16.1.12.",
"Компьютер FileServer имеет IP-адрес 172.16.10.10.",
"Обозначения в задании: K1 – MegaBoss, K2 – Manager2, K3 – File-Server."
]);</script>

<script>variant(1,6,[
"Сеть между маршрутизаторами RServers, RManagers и RBosses: 192.168.0.0.",
"Компьютер MicroBoss имеет IP-адрес 10.0.1.5.",
"Компьютер Manager3 имеет IP-адрес 10.0.2.5.",
"Компьютер PrintServer имеет IP-адрес 10.0.64.1.",
"Обозначения в задании: K1 – Manager3, K2 – PrintServer, K3 – Micro-Boss."
]);</script>

<script>variant(1,7,[
"Сеть между маршрутизаторами R1 и ADSL: 172.168.0.0.",
"Компьютер Station1 имеет IP-адрес 172.168.1.2.",
"Компьютер Remote1 имеет IP-адрес 10.0.0.110.",
"Сеть между маршрутизаторами ADSL и ADSL2: 192.168.0.0.",
"Обозначения в задании: K1 – Station1, K2 – Remote1, K3 – Station2."
]);</script>

<script>variant(1,8,[
"Сеть между маршрутизаторами R1 и ADSL: 192.168.0.0.",
"Компьютер Station1 имеет IP-адрес 192.168.1.2.",
"Компьютер Remote1 имеет IP-адрес 99.11.0.11.",
"Сеть между маршрутизаторами ADSL и ADSL2: 172.168.0.0.",
"Обозначения в задании: K1 – Station1, K2 – Remote1, K3 – Station2."
]);</script>

<script>variant(1,9,[
"Сеть между маршрутизаторами R1 и R2: 192.168.100.0.",
"Компьютер PC1 имеет IP-адрес 129.64.128.1.",
"Компьютер PC2 имеет IP-адрес 129.64.127.254.",
"Компьютер PC4 имеет IP-адрес: 10.0.0.2.",
"Длина маски подсети (количество значащих единиц) на PC1, PC2, PC3 <br> должно быть минимально возможным (обеспечивая при этом корректную работу).",
"Обозначения в задании: K1 – PC1, K2 – PC2, K3 – PC3."
]);</script>

<script>variant(1,10,[
"Сеть между маршрутизаторами R1 и R2: 192.168.0.0.",
"Компьютер PC1 имеет IP-адрес 172.168.0.1.",
"Компьютер PC2 имеет IP-адрес 172.168.0.2.",
"Компьютер PC4 имеет IP-адрес: 1.0.0.2.",
"Обозначения в задании: K1 – PC1, K2 – PC2, K3 – PC3."
]);</script>

<!------------------------------------------------------------------------------------------------------------->
<br />
<hr>
<a name="menu"></a>
<h5>1.4. Краткие теоретические сведения.</h5>
<div class="spisok">
	 <a href="#1-4-1">1.4.1. Сетевой уровень: IP-адресация.</a><br />
	 <a href="#1-4-2">1.4.2. Типы сетевых адресов.</a><br />
	 <a href="#1-4-3">1.4.3. Структура IP-адреса.</a><br />
	 <a href="#1-4-4">1.4.4. Отображение физических адресов на логические.</a><br />
	 <a href="#1-4-5">1.4.5. Маршрутизация по умолчанию.</a><br />
</div>
<hr>


<!------------------------------------------------------------------------------------------------------- 1.4.1 --->
<a name="1-4-1"></a>
<div class="begin">(<a href="#menu" >начало</a>)</div>
<h5>1.4.1. Сетевой уровень: IP-адресация.</h5> 
<!------------------------------------------------------------------------------------------------------- 1.4.1 --->
<p>Сетевой уровень (межсетевой уровень) модели TCP/IP служит для
образования единой транспортной системы, объединяющей несколько
сетей, причем эти сети могут использовать совершенно различные
принципы передачи сообщений между конечными узлами и обладать
произвольной топологией.
<p>На этом уровне термин сеть означает
совокупность компьютеров, соединенных между собой в соотвествии с
некой топологией и использующих физический уровень модели TCP/IP
для передачи данных. Единицей данных сетевого уровня является пакет.
На этом уровне определяются два вида протоколов – сетевые протоколы
и протоколы маршрутизации.
<ul><li>Первые реализуют продвижение пакетов
через сеть. Это такие протоколы как IP, ICMP, ARP и другие.
</li><li>Вторые – предоставляют способы обмена информацией о 
маршрутах. Кроме того, сетевой уровень TCP/IP, с помощью средств
IP-адресации, решает важную задачу идентификации узла-получателя пакета.
</li></ul>


<!------------------------------------------------------------------------------------------------------- 1.4.2 --->
<a name="1-4-2"></a>
<div class="begin">(<a href="#menu" >начало</a>)</div>
<h5>1.4.2. Типы сетевых адресов</h5>
<!------------------------------------------------------------------------------------------------------- 1.4.2 --->
<p>Каждый компьютер в сети TCP/IP имеет адреса двух типов:
<ul><li>локальный (физический) адрес узла, определяемый технологией,
 с помощью которой построена отдельная сеть, в которую входит
 данный узел. Для узлов, входящих в локальные сети – это
 МАС-адрес сетевого адаптера или порта маршрутизатора. Эти
 адреса назначаются производителями оборудования и являются
 уникальными адресами, так как управляются централизовано.

 <p>Для всех существующих технологий локальных сетей МАС-адрес
 имеет формат 6 байтов:

  <ul><li>старшие 3 байта – идентификатор фирмы производителя,
  </li><li>а младшие 3 байта назначаются уникальным образом самим производителем.
  </li></ul>

 <p>Для узлов, входящих в глобальные сети, такие как Х.25 или frame
 relay, физический адрес назначается администратором глобальной сети.
 Пример физического адреса: 44-BC-89-A2-FE-00;

 </li><li>IP-адрес, состоящий из 4 байт. Этот адрес используется на
 сетевом уровне. Он назначается администратором во время
 конфигурирования компьютеров и маршрутизаторов. IP-адрес
 состоит из двух частей: номера сети и номера узла.

 <p>Номер сети определяет конкретную физическую сеть.
 Номер узла определяет конкретную рабочую станцию, сервер и пр.,
 включенную в сеть.
 Подсеть – это физический сегмент TCP/IP сети, в котором
 используется IP-адреса с общим номером сети. Пример IP-
 адреса: 172.168.10.15.
</li></ul>

Номер узла в протоколе IP назначается независимо от физического
адреса узла. Деление IP-адреса на поле номера сети и номера узла
– гибкое, и граница между этими полями может устанавливаться
произвольно. Узел может входить в несколько IP-сетей. В этом случае
узел должен иметь несколько IP-адресов, по числу сетевых связей.

<p>Таким образом IP-адрес характеризует не отдельный компьютер
или маршрутизатор, а один сетевой интерфейс (физический или
виртуальный). IP-адрес имеет длину 4 байта и обычно записывается
в виде четырех чисел, представляющих значения каждого байта в
десятичной форме, и разделенных точками, например:
<div class="spisok">
10.10.1.4 – традиционная десятичная форма представления адреса,<br>
00001010 00001010 00000001 00000100 – двоичная форма
представления этого же адреса.
</div>

<!------------------------------------------------------------------------------------------------------- 1.4.3 --->
<a name="1-4-3"></a>
<div class="begin">(<a href="#menu" >начало</a>)</div>
<h5>1.4.3. Структура IP-адреса</h5>
<!------------------------------------------------------------------------------------------------------- 1.4.3 --->
<p>Какая часть IP-адреса относится к номеру сети, а какая к номеру
узла, определяется двумя способами: с помощью классов (классовая
адресация) или с помощью масок подсети (бесклассовая адресация).
В классовой адресации номер сети и номер узла определяются по
принадлежности IP-адреса одному из классов адресов: A,B,C,D или E.

<p>Класс определяется значениями первых битов адреса:
<ul><li>если адрес начинается с 0, то сеть относят к классу А, и номер
сети занимает один байт, остальные 3 байта интерпретируются как
номер узла в сети. Сети класса А имеют номера в диапазоне от 1
до 126. (Номер 0 не используется, а номер 127 зарезервирован для
специальных целей);
 </li><li>если первые два бита адреса равны 10, то сеть относится к классу
В. В сетях класса В под адрес сети и под адрес узла отводится по
16 битов, то есть по 2 байта;
 </li><li>если адрес начинается с последовательности 110, то это сеть
класса С. Под адрес сети отводится 24 бита, а под адрес узла –
8 битов;
 </li><li>если адрес начинается с последовательности 1110, то он является
адресом класса D и обозначает особый, групповой адрес. Если в
пакете в качестве адреса назначения указан адрес класса D, то
такой пакет должны получить все узлы, которым присвоен данный
адрес;
 </li><li>если адрес начинается с последовательности 11110, то это адрес
класса Е, он зарезервирован для будущих применений.
</li></ul>

<p>В бесклассовой адресации номер сети к которому принадлежит
узел с заданным IP-адресом определяется другим способом: вместе с
IP-адресом нам предоставляется маска подсети. В терминологии сетей
TCP/IP маской подсети или маской сети называется битовая маска,
определяющая, какая часть IP-адреса узла сети относится к адресу сети,
а какая к адресу самого узла в этой сети. 
<p>Например, узел с IP-адресом
192.168.0.1 и маской подсети 255.255.255.0 находится в сети 192.168.0.0.
Чтобы получить адрес сети, зная IP-адрес и маску подсети, необходимо
применить к ним операцию поразрядной конъюнкции. Например:
<pre class="preText">
IP-адрес:      00001010 00001010 00000001 00000100  ( 10.10. 1. 4)
Маска подсети: 11111111 00000000 00000000 00000000  (255. 0. 0. 0)
Адрес сети:    00001010 00000000 00000000 00000000  ( 10. 0. 0. 0)
</pre>
<p>Для стандартных классов сетей маски имеют следующие значения:</p>
<pre class="preText">
• 255.0.0.0     – маска для сети класса А;
• 255.255.0.0   – маска для сети класса В;
• 255.255.255.0 – маска для сети класса С.
</pre>

<!------------------------------------------------------------------------------------------------------- 1.4.4 --->
<a name="1-4-4"></a>
<div class="begin">(<a href="#menu" >начало</a>)</div>
<h5>1.4.4. Отображение физических адресов на логические</h5>
<!------------------------------------------------------------------------------------------------------- 1.4.4 --->
<p>Отображение физических адресов на IP-адреса происходит
с помощью протокола ARP. Функционирование ARP происходит
различным образом, в зависимости от того, какой протокол канального
уровня работает в данной сети. В локальных сетях протокол ARP
использует широковещательные кадры протокола канального уровня
для поиска в сети узла с заданным IP-адресом. 
<p>Узел, которому нужно выполнить отображение IP-адреса на локальный
адрес, формирует ARP запрос, вкладывает его в кадр протокола канального
уровня, указывая в нем известный IP-адрес, и осуществляет его
широковещательную рассылку по сети.
<p>Все узлы локальной сети получают ARP запрос
и сравнивают указанный там IP-адрес с собственным. В случае их
совпадения узел формирует ARP-ответ, в котором указывает свои IP-
и локальный- адреса. ARP-запросы и ответы используют один и тот
же формат пакета. Так как локальные адреса могут в различных
типах сетей иметь различную длину, то формат пакета протокола ARP
зависит от типа сети.
<p>Для того, чтобы не перегружать сеть запросами,
ARP использует таблицу отображения (так называемый ARP-кэш). Эта
таблица содержит три поля – IP-адрес, соответствующий ему MAC-
адрес и тип. Тип может быть статическим или динамическим. Запись
в таблице имеет динамический тип, если она внесена в таблицу
путем широковещательного запроса ARP. Такие записи имеют время
устаревания (обычно 180 или 360 секунд), после истечения которого
они удаляются из таблицы. Запись в таблице будет иметь статический
тип, если она добавлена вручную (например, с помощью команды arp в
ОС Windows или Unix). Статическая запись имеет неограниченное время
устаревания.


<!------------------------------------------------------------------------------------------------------- 1.4.5 --->
<a name="1-4-5"></a>
<div class="begin">(<a href="#menu" >начало</a>)</div>
<h5>1.4.5. Маршрутизация по умолчанию</h5>
<!------------------------------------------------------------------------------------------------------- 1.4.5 --->
<p>Для объединения подсетей в единую сеть в простейшем
случае используется маршрутизация по умолчанию. Она организуется
посредством шлюзов. Шлюзом будем называть узел внутри подсети,
который предоставляет доступ в другую подсеть. Чаще всего в
виде шлюза выступает маршрутизатор.
<p>Схема такой маршрутизации выглядит следующим образом: задан адрес
шлюза по умолчанию. При попытке отправки пакета в сеть, узел проверяет
совпадение подсети назначения пакета с подсетью узла. Если подсети
разные, то пакет отправляется на шлюз.
<p>В простейшем случае, шлюз сравнивает сеть IP-адреса назначения
с номерами сетей на своих интерфейсах и в случае совпадения,
направляет пакет узлу назначения через этот сетевой интерфейс.
В противном случае он отправляет пакет узлу, указанному в
качестве шлюза по умолчанию на самом шлюзе. Если такового нет, то
пакет теряется.


<h5>1.4.6. Протокол ICMP</h5>
<p>Для проверки соединений и корректного функционирования сети
обычно используется протокол ICMP . ICMP – Internet Control Message
Protocol, протокол управляющих сообщений интернета. ICMP – протокол
сетевого уровня и работает поверх протокола IP. Он предназначен
для обмена информацией об ошибках между маршрутизаторами
(шлюзами) сети и узлом-источником пакета.
<p>С помощью специальных пакетов этот протокол сообщает о невозмодности
доставки пакета, превышении времени жизни, аномальных значениях параметров,
изменении маршрта пересылки, состоянии системы и т. п.
<p>В простейшем случае, для проверки работоспособности сети используются
два сообщения ICMP: эхо-запрос (Echo request) и эхо-ответ (Echo reply).
Когда на узел приходит сообщение ICMP типа эхо-запрос, он отправляет
сообщение эхо-ответ на тот узел, с которого пришел запрос. Пример
реализации такого обмена представлен в утилите ping, входящей в
состав почти любой сетевой ОС.


<Script>Link_Menu("1")</Script>
</BODY>
<!-- Mirrored from www.habarov.spb.ru/lab_net/Network_Simulate/NetSimulate/lab1.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Dec 2017 18:26:47 GMT -->
</HTML>
