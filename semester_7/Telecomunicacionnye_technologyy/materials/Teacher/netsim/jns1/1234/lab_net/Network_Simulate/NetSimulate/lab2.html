<html>

<!-- Mirrored from www.habarov.spb.ru/lab_net/Network_Simulate/NetSimulate/lab2.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Dec 2017 18:26:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=WINDOWS-1251" /><!-- /Added by HTTrack -->
<head>
<title>Моделирование работы IP-сетей - Cтатическая маршрутизация в IP-сетях</title>
<LINK href="../style.css" rel=stylesheet type=text/css>
<script SRC="../menu.js">
     document.write("Included JS file not found");
</script> 
</head>

<body class="MainText">
<script>Main_Menu();</script>


<h5>2. Лабораторная работа №2. "Cтатическая маршрутизация в IP-сетях".</h5>
<ul><li>Цель работы:
<p>Изучение методов статической маршрутизации в IP-сетях. Получение
навыков управления таблицами маршрутизации на узлах сетевого уровня.
</li><li>Порядок выполнения работы:
  <ol><li>Для всех узлов сети установить IP-адреса, маски подсетей и шлюзы
по-умолчанию, чтобы добиться успешного выполнения эхо-запроса
ближайших соседей (находящихся в одной подсети).
  </li><li>Настроить таблицы маршрутизации на маршрутизаторах, чтобы
добиться доставки пакетов от узла K1 к узлу K2 и обратно, от узла K2
к K3 и обратно, от узла K3 к K1 и обратно. Пакеты должны доходить
до узлов кратчайшим путем
  </li><li>Настроить таблицы маршрутизации на узлах K1, K2 и K3, чтобы
обеспечить кратчайшую доставку пакетов между этими узлами, если
это невозможно было обеспечить в пункте 2.
  </li></ol>
</li><li>В отчете привести конфигурацию TCP/IP для каждого из узлов, таблицы
маршрутизации, результаты эхо-запросов между узлами K1, K2 и
K3, а также обоснование правильности и оптимальности выбранных
маршрутов.
</li></ul>

<h5>2.1. Пример выполнения лабораторной работы</h5>
<ul><li>Исходные данные: 
  <ul><li>Файл со схемой сети: lab2_sample.jfst.
    </li><li>Заданная конфигурация сети имеет вид, приведенный на рис.2.1.
         <script>myRisBig("2_0.gif",'Рис. 2.1. Структура исследуемой сетевой архитектуры.',0);</script>
    </li><li>Компьютер PC1 имеет IP-адрес 172.168.0.2.
	</li><li>Компьютер PC2 имеет IP адрес 10.0.0.2.
    </li><li>Сеть между маршрутизаторами R1 и R: 172.168.100.0. 
    </li><li>Сеть между маршрутизаторами R2 и R: 192.168.0.0.
  </li></ul>

</li><li>Задание:
  <ol><li>Задать маски подсети и шлюзы по-умолчанию для PC1 и PC2,
а также IP-адреса из заданного диапазона вместе с масками и
шлюзами для R1, R и R2 так, чтобы обеспечить корректную доставку
пакетов от PC1 к PC2.
  </li><li>Настроить таблицу маршрутизации на R так, чтобы обеспечить
корректную доставку пакетов от PC2 к PC1
  </li><li>Выполнить эхо-запрос с PC1 на PC2. Посмотреть вывод программы.
  </li></ol>
</li></ul>

<br>
<p><b>Порядок выполнения будет следующим:</b></p>
  <ol><li>Установим для всех узлов IP адреса, маски и шлюзы.
  <p>Для исходной структуры сети установим IP адреса всех узлов,
  маски подсетей и шлюзы по умолчанию:</p>
<pre class="preText">
                    IP адрес        Маска подсети    Шлюз по умолчанию:
PC1:                172.168.0.2     255.255.255.0    172.168.0.1
PC2:                10.0.0.2        255.0.0.0        10.0.0.1
R1-Интерфейс eth0:  172.168.0.1     255.255.255.0    172.168.100.1
R1-Интерфейс eth1:  172.168.100.2   255.255.255.0    172.168.100.1
R -Интерфейс eth0:  172.168.100.1   255.255.255.0    192.168.0.1
R -Интерфейс eth1:  192.168.0.2     255.255.255.0    192.168.0.1
R2-Интерфейс eth0:  192.168.0.1     255.255.255.0    192.168.0.2
R2-Интерфейс eth1:  10.0.0.1        255.0.0.0        192.168.0.2
</pre>  
<p>Такая конфигурация обеспечит доставку пакетов от PC1 к PC2,
но не обратно. Это объясняется тем, что при попытке отправки
пакета с PC2 на PC1, пакет сначала попадет на R2 (т.к. он является
шлюзом для PC2), а оттуда на R. Но с маршрутизатора R он
снова будет отправлен на R2, т.к. для R шлюзом является R2.
Таким образом, возникнет "петля". Устранить её можно с помощью
настройки таблицы маршрутизации на R.

  </li><li>Таблицу маршрутизации на R будет выглядеть следующим
  образом:
<pre class="preText">
R # route print
Destination  Gateway      Genmask        Type  Iface
default      192.168.0.1  255.255.255.0  0     eth0
</pre>

<p>Для того чтобы пакеты от PC2 прошли через R на R1, необходимо
добавить маршрут для сети 172.168.0.0/255.255.255.0.
<pre class="preText">
R # route add 172.168.0.0 eth0 255.255.255.0 172.168.100.2
Route added.
</pre>

<p>Теперь любой пакет, попавший на R и имеющий в качестве
подсети назначения 172.168.0.0/255.255.255.0 будет направлен на
маршрутизатор R1. Чтобы проверить корректность добавления
маршрута необходимо вывести таблицу маршрутизации:
<pre class="preText">
R # route print
IP routing table:
Destination  Gateway      Genmask        Type  Iface
default      192.168.0.1  255.255.255.0  0     eth0
172.168.0.0 172.168.100.2 255.255.255.0  0     eth0
</pre>

  </li><li>Посылаем с PC1 эхо-запрос PC2, выполняя команду ping.
<pre class="preText">
PC1 Created Echo Request packet to 10.0.0.2
PC1 Sending packet from ProtocolStack (to 172.168.0.1).
...
PC2 ProtocolStack received packet from local Interface.
PC2 Confirmed Packet is for this Network Layer Device.
PC2 Created Echo Reply packet to 172.168.0.2
PC2 Sending packet from ProtocolStack (to 10.0.0.1).
...
PC1 ProtocolStack received packet from local Interface.
PC1 Confirmed Packet is for this Network Layer Device.
PC1 Echo reply packet received from 10.0.0.2
</pre>
<p>Как видно из вывода программы, на эхо-запрос пришел
ответ, следовательно таблица маршрутизации настроена верно.
Аналогичным образом можно настроить таблицы на остальных
устройствах.
</li></ol>

<h5>2.2. Контрольные вопросы.</h5>
</p><p>1. Что такое маршрутизация?
</p><p>2. Для чего предназначен маршрутизатор?
</p><p>3. Перечислите типы маршрутизации.
</p><p>4. Что такое таблицы маршрутизации и для чего они нужны?
</p><p>5. Какие типы записей могут быть в таблице маршрутизации.
</p>

<hr /><br />

<h5>2.3. Варианты заданий.</h5>

<script>variant(2,1,[
"Сеть между маршрутизаторами R1, R2 и R3: 192.168.3.0.",
"Сеть между маршрутизаторами R3 и R4: 192.168.4.0.",
"Сеть между маршрутизаторами R5 и R6: 192.168.5.0.",
"Компьютер PC1 имеет IP-адрес 192.168.0.100.",
"Компьютер PC3 имеет IP-адрес 192.168.1.100.",
"Компьютер PC4 имеет IP-адрес: 192.168.2.100.",
"Обозначения в задании: K1 – PC1, K2 – PC3, K3 – PC4."
]);</script>


<script>variant(2,2,[
"Сеть между маршрутизаторами R1, R2 и R3: 172.168.3.0.",
"Сеть между маршрутизаторами R5 и R6: 172.168.4.0.",
"Компьютер PC1 имеет IP-адрес 172.168.0.100.",
"Компьютер PC3 имеет IP-адрес 172.168.1.100.",
"Компьютер PC4 имеет IP-адрес: 172.168.2.100.",
"Обозначения в задании: K1 – PC1, K2 – PC3, K3 – PC4."
]);</script>

<script>variant(2,3,[
"Сеть между маршрутизаторами R1, R2, R3 и R4: 192.168.0.96.",
"Сеть между маршрутизаторами R4 и R5: 172.168.4.0.",
"Маршрутизатор R6 имеет адрес 10.120.0.1 на первом интерфейсе<br> и 10.159.0.1 на втором интерфейсе.",
"Сеть между маршрутизаторами R3 и R8: 11.0.0.0.",
"Компьютер PC1 имеет IP-адрес 192.168.0.4.",
"Компьютер PC3 имеет IP-адрес 192.168.0.34.",
"Компьютер PC4 имеет IP-адрес: 192.168.0.250.",
"Обозначения в задании: K1 – PC1, K2 – PC3, K3 – PC4."
]);</script>

<script>variant(2,4,[
"Сеть между маршрутизаторами R1, R2, R3 и R4: 199.0.5.96.",
"Сеть между маршрутизаторами R4 и R5: 172.168.4.0.",
"Маршрутизатор R6 имеет адрес 11.120.0.1 на первом интерфейсе<br> и 11.159.0.1 на втором интерфейсе.",
"Сеть между маршрутизаторами R3 и R8: 12.0.0.0.",
"Компьютер PC1 имеет IP-адрес 199.0.5.2.",
"Компьютер PC3 имеет IP-адрес 199.0.5.52.",
"Компьютер PC4 имеет IP-адрес: 199.0.5.250.",
"Обозначения в задании: K1 – PC1, K2 – PC3, K3 – PC4."
]);</script>

<script>variant(2,5,[
"Сеть между узлами PC3 и R3, R4, R6: 204.188.45.128.",
"Сеть между маршрутизаторами R1, R2, R3: 204.188.45.192.",
"Компьютер PC1 имеет IP-адрес 204.188.45.1.",
"Компьютер PC2 имеет IP-адрес 204.188.45.65.",
"Компьютер PC3 имеет IP-адрес 204.188.45.129.",
"Длина маски подсети должна быть минимально возможной.",
"Обозначения в задании: K1 – PC1, K2 – PC2, K3 – PC3."
]);</script>

<script>variant(2,6,[
"Сеть между узлами R1, R2, R3: 192.115.120.0.",
"Сеть между узлами R2, R3, R4: 192.115.112.0.",
"Сеть между узлами R4, R5, R7: 192.115.108.0.",
"Сеть между узлами R6 и R7: 192.115.96.0.",
"Компьютер PC1 имеет IP-адрес 192.115.128.1.",
"Компьютер PC2 имеет IP-адрес 192.115.100.1.",
"Компьютер PC3 имеет IP-адрес 192.115.88.2.",
"Длина маски подсети должна быть минимально возможной.",
"Обозначения в задании: K1 – PC1, K2 – PC2, K3 – PC3."
]);</script>

<script>variant(2,7,[
"Сеть между узлами PC3 и R3, R4, R6: 204.188.45.128.",
"Сеть между маршрутизаторами R1, R2, R3: 204.188.45.192.",
"Компьютер PC1 имеет IP-адрес 204.188.45.1.",
"Компьютер PC2 имеет IP-адрес 204.188.45.65.",
"Компьютер PC3 имеет IP-адрес 204.188.45.129.",
"Компьютер BOSS имеет IP-адрес 204.188.45.196.",
"Обозначения в задании: K1 – PC1, K2 – BOSS, K3 – PC3."
]);</script>

<script>variant(2,8,[
"Сеть между узлами R1, R2, R3: 192.115.120.0.",
"Сеть между узлами R4 и R7: 192.115.108.0.",
"Сеть между узлами R6 и R7: 192.115.96.0.",
"Компьютер PC1 имеет IP-адрес 192.115.128.1.",
"Компьютер PC2 имеет IP-адрес 192.115.112.4.",
"Компьютер PC3 имеет IP-адрес 192.115.88.2.",
"Длина маски подсети должна быть минимально возможной.",
"Обозначения в задании: K1 – PC1, K2 – PC2, K3 – PC3."
]);</script>

<script>variant(2,9,[
"Сеть между узлами R1, R2, R3: 10.0.120.0.",
"Сеть между узлами R3 и R4: 192.168.0.0.",
"Сеть между узлами R4 и R5: 192.168.1.0.",
"Компьютер PC1 имеет IP-адрес 10.0.0.3.",
"Компьютер PC2 имеет IP-адрес 10.0.0.10.",
"Компьютер PC3 имеет IP-адрес 10.0.0.18.",
"Обозначения в задании: K1 – PC1, K2 – PC2, K3 – PC3."
]);</script>

<script>variant(2,10,[
"Сеть между узлами R3 и R4: 192.168.0.0.",
"Сеть между узлами R4 и R5: 192.168.1.0.",
"Компьютер PC1 имеет IP-адрес 10.0.0.5.",
"Компьютер PC2 имеет IP-адрес 10.0.0.130.",
"Компьютер PC3 имеет IP-адрес 10.0.0.194.",
"Обозначения в задании: K1 – PC1, K2 – PC2, K3 – PC3."
]);</script>

<br />
<hr>
<h5>2.4. Краткие теоретические сведения.</h5>
<hr>

<h5>2.4.1. Сетевой уровень: статическая маршрутизация</h5>
<p>Маршрутизация – важнейший процесс в IP-сетях. Чтобы
некоторый узел мог найти в сети другой, должен быть определен
механизм описания того, как должен двигаться пакет от произвольного
узла к другому узлу. Такой механизм и называется маршрутизацией.

<p>Более строгое определение звучит так: Маршрутизация – процесс
определения маршрута следования пакетов данных в компьютерных
сетях. Маршрутизация выполняется специальными программными или
аппаратными средствами – маршрутизаторами. 
<p>Маршрутизатор –
сетевое устройство, используемое в компьютерных сетях передачи
данных, которое, на основании информации о топологии сети (таблицы
маршрутизации) и определенных правил, принимает решения о
пересылке пакетов сетевого уровня их получателю. Маршрутизация,
осуществляемая IP – это процесс поиска в таблице маршрутизации,
определение интерфейса, куда будет послан пакет. Существует два типа
маршрутизации:
<ul><li>Статическая
</li><li>Динамическая
</li></ul>
<p>Статическая маршрутизация осуществляется на основе таблиц
маршрутизации, задаваемых администратором. Динамическая
маршрутизация осуществляется с помощью протоколов маршрутизации.
<p>Протокол маршрутизации это сетевой протокол, используемый
маршрутизаторами для определения возможных маршрутов следования
данных в составной компьютерной сети. Применение протокола
маршрутизации позволяет избежать ручного ввода всех допустимых
маршрутов, что, в свою очередь, снижает количество ошибок,
обеспечивает согласованность действий всех маршрутизаторов в
сети и облегчает труд администраторов.

<h5>2.4.2. Принцип статической маршрутизации</h5>
<p>В этой главе будет рассмотрена статическая маршрутизация в
IP-сетях. Частично, эта тема уже затрагивалась в главе 1, когда
рассматривалась простейшая маршрутизация на основе шлюзов
по умолчанию. Как правило, маршрутизатор имеет несколько
интерфейсов и может одновременно находится в нескольких подсетях.
<p>Таблица маршрутизации содержит информацию, на основе которой
маршрутизатор принимает решение о дальнейшей пересылке пакетов.
Как только маршрутизатор (или любой узел сети, поддерживающий
сетевой уровень модели TCP/IP) получает IP-пакет, выполняется
следующая последовательность действий:
  
  <ol><li>Маршрутизатор определяет, является ли узел-получатель пакета
  локальным (т.е. находится ли он в той же подсети, что
  маршрутизатор). Если получатель находится в той же подсети, то
  пакет направляется ему напрямую.
  </li><li>Если узел-получатель находится в другой подсети, то
  просматривается таблица маршрутизации на предмет пути к
  этому узлу. При просмотре, сеть узла-получателя сравнивается с
  записями о сетях в таблице маршрутизации и при обнаружении
  совпадения пакет направляется маршрутизатору, указанному в
  соответствующей записи.
  </li><li>Если маршрут в таблице маршрутизации не найден, то
  пакет отправляется шлюзу по умолчанию, указанному на
  маршрутизаторе.
  </li><li>Если запись о шлюзе по умолчанию отсутствует, то пакет
  уничтожается.
  </li></ol>

<p>Для указания шлюза по умолчанию, в таблице существует специальная
запись default. Запись default указывает, на какой узел должен быть
направлен пакет, если совпадений его места назначения в таблице не
найдено.


<h5>2.4.2. Таблицы маршрутизации</h5>
<p>Чтобы по адресу сети назначения можно было бы выбрать
маршрут дальнейшей пересылки пакета, каждый узел, поддерживающий
сетевой уровень анализирует специальную информационную структуру,
называемую таблицей маршрутизации. Простейшая таблица
маршрутизации включает в себя информацию об узле(или сети)
назначения, маске подсети для узла(сети) назначения, интерфейсе,
через который следует направить пакет и шлюзе – удаленном узле,
которому будет передан пакет.
<p>Рассмотрим, как может выглядеть таблица маршрутизации на примере.
Пусть задана конфигурация сети показанная на рисунке 2.11.
Таблица для маршрутизатора R2 может выглядеть например так:
   <script>myRisBig("2_11.gif",'Рис. 2.11. Структура сети.',0);</script>

<pre class="preText">
Destination  Gateway   Genmask    Iface
default      11.0.0.2  255.0.0.0  eth0
14.0.0.0     12.0.0.2  255.0.0.0  eth1
</pre>

<p>В первой колонке таблице перечисляются номера подсетей, во второй –
какому маршрутизатору следует перенаправить пакет для для отправки
в заданную подсеть. Третья колонка задает маску подсети назначения, в
четвертой указывается через какой интерфейс следует направить пакет.
</p>

<Script>Link_Menu("2")</Script>
</BODY>
<!-- Mirrored from www.habarov.spb.ru/lab_net/Network_Simulate/NetSimulate/lab2.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Dec 2017 18:26:47 GMT -->
</HTML>
