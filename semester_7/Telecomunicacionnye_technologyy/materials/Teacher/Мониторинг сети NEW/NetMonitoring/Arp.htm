<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
	<HEAD>
		<TITLE>Глава 5 Отображение адресов Интернета в физические адреса(ARP)</TITLE>
		<META http-equiv="Content-Type" content="text/html; charset=windows-1251">
		<META content="Информационные технологии, Д. Комер 'Межсетевой обмен с помощью TCP/IP', Отображение адресов Интернета в физические  адреса(ARP), Проблема разрешения адресов, Два типа физических адресов, Разрешение с помощью прямого отображения, Разрешение с помощью динамического связывания, Кэш разрешения адресов, Уточнение ARP, Реализация ARP, Инкапсуляция и идентификация ARP, Формат протокола ARP "
			name="Key Words">
		<META content="all" name="Robots">
		<META content=" Д. Комер 'Межсетевой обмен с помощью TCP/IP',  Глава 5 Отображение адресов Интернета в физические  адреса(ARP) , 1990 "
			name="Description">
		<META content="Static" name="Document-state">
		<LINK href="Arp.files/forum.css"
			type="text/css" rel="stylesheet">
			<META content="MSHTML 6.00.2600.0" name="GENERATOR"></HEAD>
	<BODY text="#000000" vLink="#003860" aLink="#800000" link="#006890" bgColor="#ffffff"
		topMargin="0" marginheight="0">
		<A name="top"></A>
		<H3 align="center">
		</H3>
		<H3 align="center">
			&nbsp;</H3>
		<H3 align="center">Описание протокола ARP (Address Resolution Protocol)</H3>
		<OL>
			<LI>
				<A href="Arp.htm#_5_1">Общие&nbsp;сведения</A>
			<LI>
				<A href="Arp.htm#_5_9">Инкапсуляция и 
					идентификация ARP</A>
			<LI>
				<A href="Arp.htm#_5_10">Формат протокола ARP</A></LI>
		</OL>
		<A name="_5_1"></A>
		<H4 align="center">1 Общие&nbsp;сведения</H4>
		<P align="justify">Протокол разрешения адреса ARP (Address Resolution Protoco) 
			используется для определения физического адреса узла по его IP-адресу. Протокол 
			ARP работает различным образом в зависимости от того, какой протокол канального 
			уровня работает в данной сети - протокол локальной сети (Ethernet, Token Ring, 
			FDDI) с возможностью широковещательного доступа одновременно ко всем узлам 
			сети, или же протокол глобальной сети (X.25, frame relay), как правило не 
			поддерживающий широковещательный доступ. Существует также протокол, решающий 
			обратную задачу - нахождение IP-адреса по известному локальному адресу. Он 
			называется реверсивный ARP - RARP (Reverse Address Resolution Protocol) и 
			используется при старте бездисковых станций, не знающих в начальный момент 
			своего IP-адреса, но знающих адрес своего сетевого адаптера. В локальных сетях 
			протокол ARP использует широковещательные кадры протокола канального уровня для 
			поиска в сети узла с заданным IP-адресом.
			<A name="_5_9"></A>
			<H4 align="center">2&nbsp;Инкапсуляция и идентификация ARP</H4>
		<P align="justify">
			Когда сообщения ARP пересылаются от одной машины к другой, они должны 
			передаваться в физических кадрах. Рисунок&nbsp;2.1 показывает, что сообщение 
			ARP передается как поле данных кадра.
			<PRE>

</PRE>
			<IMG src="Arp.files\1.JPG">
		<P>
			<CENTER><I>Рисунок&nbsp;2.1 Сообщение ARP, заключенное в кадре физической сети</I>
			</CENTER>
		<P align="justify">Чтобы идентифицировать, что кадр содержит запрос или ответ ARP, 
			отправитель присваивает специальное значение полю типа в заголовке кадра и 
			помещает сообщение ARP в поле данных кадра. Когда кадр прибывает на удаленный 
			узел, система смотрит тип кадра, чтобы определить его содержимое. Например, в 
			Ethernete, кадры, несущие сообщения ARP, имеют в поле типа значение 0806 в 
			шестнадцатиричном формате. Это стандартное значение, назначенное ведомством, 
			устанавливающим стандарты Ethernet. <A name="_5_10"></A>
			<H4 align="center">3&nbsp;Формат протокола ARP</H4>
		<P align="justify">
		В отличие от большинства протоколов, данные в пакетах ARP не имеют 
		фиксированного формата заголовка. Вместо этого его сообщения были разработаны 
		так, чтобы их можно было использовать для различных сетевых технологий. 
		Поэтому, первые поля заголовка содержат счетчики, которые указывают длину 
		следующих полей. Фактически, ARP можно использовать с произвольными физическими 
		адресами и произвольными протокольными адресами. Пример на рисунке 5.3 
		показывает 28-октетный формат сообщения ARP, используемый для оборудования 
		Ethernetа(у которого физические адреса являются 48-битовыми или 6-октетными) 
		при разрешении протокольных адресов IP(имеющих длину 4 октета).
		<P align="justify">
		Рисунок 3.3 показывает сообщение ARP по 4 байта в строке, в формате, который 
		будет стандартным на протяжении всей книги. К сожалению, в отличие от 
		большинства остальных протоколов, поля переменной длины в пакетах ARP не 
		выровнены на границу 32 бит, что приводит к трудности восприятия диаграммы. 
		Например, аппаратный адрес отправителя, помеченный как ОТПРАВИТЕЛЬ АА, занимает 
		6 непрерывных октетов, что приводит к появлению его на двух строках диаграммы.
		<P align="justify">
			<TABLE id="Table1" cellSpacing="1" cellPadding="1" border="1">
				<TR>
					<TD>
						<P align="center">0</P>
					</TD>
					<TD>
						<P align="center">1</P>
					</TD>
					<TD>
						<P align="center">2</P>
					</TD>
					<TD>
						<P align="center">3</P>
					</TD>
					<TD>
						<P align="center">4</P>
					</TD>
					<TD>
						<P align="center">5</P>
					</TD>
					<TD>
						<P align="center">6</P>
					</TD>
					<TD>
						<P align="center">7</P>
					</TD>
					<TD>
						<P align="center">8</P>
					</TD>
					<TD>
						<P align="center">9</P>
					</TD>
					<TD>
						<P align="center">A</P>
					</TD>
					<TD>
						<P align="center">B</P>
					</TD>
					<TD>
						<P align="center">C</P>
					</TD>
					<TD>
						<P align="center">D</P>
					</TD>
					<TD>
						<P align="center">E</P>
					</TD>
					<TD>
						<P align="center">F</P>
					</TD>
					<TD>
						<P align="center">0</P>
					</TD>
					<TD>
						<P align="center">1</P>
					</TD>
					<TD>
						<P align="center">2</P>
					</TD>
					<TD>
						<P align="center">3</P>
					</TD>
					<TD>
						<P align="center">4</P>
					</TD>
					<TD>
						<P align="center">5</P>
					</TD>
					<TD>
						<P align="center">6</P>
					</TD>
					<TD>
						<P align="center">7</P>
					</TD>
					<TD>
						<P align="center">8</P>
					</TD>
					<TD>
						<P align="center">9</P>
					</TD>
					<TD>
						<P align="center">A</P>
					</TD>
					<TD>
						<P align="center">B</P>
					</TD>
					<TD>
						<P align="center">C</P>
					</TD>
					<TD>
						<P align="center">D</P>
					</TD>
					<TD>
						<P align="center">E</P>
					</TD>
					<TD>
						<P align="center">F</P>
					</TD>
				</TR>
				<TR>
					<TD colspan="16">
						<P align="center">ТИП ОБОРУДОВАНИЯ
						</P>
					</TD>
					<TD colspan="16">
						<P align="center">ТИП ПРОТОКОЛА
						</P>
					</TD>
				</TR>
				<TR>
					<TD colspan="8">
						<P align="center">HLEN
						</P>
					</TD>
					<TD colspan="8">
						<P align="center">PLEN
						</P>
					</TD>
					<TD colspan="16">
						<P align="center">ОПЕРАЦИЯ
						</P>
					</TD>
				</TR>
				<TR>
					<TD colspan="32">
						<P align="center">ОТПРАВИТЕЛЬ АА (октеты 0-3)
						</P>
					</TD>
				</TR>
				<TR>
					<TD colspan="16">
						<P align="center">ОТПРАВИТЕЛЬ АА(октеты 4-5)</P>
					</TD>
					<TD colspan="16">
						<P align="center">ОТПРАВИТЕЛЬ IP(октеты 0-1)
						</P>
					</TD>
				</TR>
				<TR>
					<TD colspan="16">
						<P align="center">ОТПРАВИТЕЛЬ IP(октеты 2-3)</P>
					</TD>
					<TD colspan="16">
						<P align="center">ПОЛУЧАТЕЛЬ АА(октеты 0-1)
						</P>
					</TD>
				</TR>
				<TR>
					<TD colspan="32">
						<P align="center">ПОЛУЧАТЕЛЬ АА(октеты 0-1)</P>
					</TD>
				</TR>
				<TR>
					<TD colspan="32">
						<P align="center">ПОЛУЧАТЕЛЬ IP(октеты 0-3)</P>
					</TD>
				</TR>
			</TABLE>
		</P>
		<P>
			<CENTER><I>Рисунок 3.3 Пример формата сообщения ARP/RARP для разрешения адресов 
					IP-Ethernet. Длины полей зависят от длин аппаратных и протокольных адресов, 
					которые имеют значение соответственно 6 октетов для адреса Ethernetа и 4 октета 
					для IP-адреса.</I>
			</CENTER>
		<P align="justify">
		Поле ТИП ОБОРУДОВАНИЯ определяет тип аппаратного интерфейса, для которого 
		отправитель ищет ответ, оно содержит значение 1 для Ethernetа. Аналогичным 
		образом, поле ТИП ПРОТОКОЛА указывает тип адреса протокола более высокого 
		уровня, который использует отправитель; оно содержит 0800 в шестнадцатиричном 
		формате для IP-адреса. Поле ОПЕРАЦИЯ указывает запрос ARP(1), ответ ARP(2), 
		запрос RARP(3), или ответ RARP(4). Поля HLEN и PLEN позволяют использовать ARP 
		в любых сетях, так как они указывают длину аппаратного адреса и адреса 
		протокола верхнего уровня. Отправитель передает свой аппаратный адрес и 
		IP-адрес, если они известны ему, в полях ОТПРАВИТЕЛЬ АА и ОТПРАВИТЕЛЬ IP.
		<P align="justify">
		При посылке запроса отправитель также указывает IP-адреса назначения(ARP) или 
		аппаратного адреса назначения(RARP), используя поля ПОЛУЧАТЕЛЬ АА и ПОЛУЧАТЕЛЬ 
		IP. Отвечающая машина перед передачей ответа заполняет отсутствующие адреса, 
		меняет местами пары отправителя и получателя и меняет код операции на ответ. 
		Поэтому ответ содержит IP- и аппаратный адреса исходного отправителя, а также 
		IP- и аппаратный адреса машины, которая разрешила эту связку.
		<P align="justify">
			<A name="_5_11"></A>&nbsp;</P>
	</BODY>
</HTML>
