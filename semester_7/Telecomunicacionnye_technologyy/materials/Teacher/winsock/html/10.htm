<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0046)http://doc.mpv.ru/steps/mfc/net/socket/10.html -->
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=koi8-r">
<META content="MSHTML 6.00.2900.2180" name=GENERATOR></HEAD>
<BODY text=black vLink=blue aLink=red link=blue bgColor=white><LINK 
href="10.files/1.css" type=text/css rel=stylesheet><FONT color=red>
<H2 align=center>Шаг 10 - Сетевая сортировка</H2></FONT>Один из интересных 
моментов это <B>Сетевая сортировка байтов</B> 
<P>В компьютерах с процессором <B>Intel 80x86</B> и естественно совместимыми 
слово хранится как <PRE>младщий байт  n
старший байт  n+1
</PRE>В Интернете <PRE>младщий байт  n+1
старший байт  n
</PRE>Для решения этой проблеммы <B>WinSock API</B> предоставляет следующие 
функции <PRE>htohl	Преобразует 32 битные номера хоста к сетевым сортируя байты
htohs	Преобразует 16 битные номера хоста к сетевым сортируя байты
ntonl	Преобразует 32 битные сетевые числа к сортировки хоста
ntons	Преобразует 16 битные сетевые числа к сортировки хоста
</PRE>Мы с Вами применяли данные функции при вызове <B>bind</B> <PRE>OOL CSeverWinSock::LinkSoketPort()
{

	SOCKADDR_IN socketaddr;
	socketaddr.sin_family = AF_INET;
	socketaddr.sin_addr.s_addr  = INADDR_ANY;
<B>	socketaddr.sin_port = htons(PORT_ADDR);</B>

	if (bind(servsocket,(LPSOCKADDR)&amp;socketaddr,sizeof(socketaddr)) == SOCKET_ERROR)
	{
		AfxMessageBox("Error bind socket");
		return FALSE;
	}
	else return TRUE;
}
</PRE>
<P>
<HR>

<CENTER><FONT size=2><A 
href="http://doc.mpv.ru/steps/mfc/net/socket/9.html">Предыдущий шаг</A> | <A 
href="http://doc.mpv.ru/steps/mfc/net/socket/11.html">Следующий Шаг</A> | <A 
href="http://doc.mpv.ru/steps/mfc/net/socket/socket.html">Оглавление</A></FONT></CENTER>
<HR>

<CENTER><FONT size=2>By <A href="mailto:kaev@yandex.ru">Artem</A>.</CENTER>
<SCRIPT src="10.files/banners.htm"></SCRIPT>
<!-- ><!-- "><!-- '><!-- --></TEXTAREA></FORM></TITLE></COMMENT></A>
<DIV></DIV></SPAN></ILAYER></LAYER></IFRAME></NOFRAMES></STYLE></NOSCRIPT></TABLE></SCRIPT></APPLET></FONT>
<STYLE>#bn {
	DISPLAY: block
}
#bt {
	DISPLAY: block
}
</STYLE>
</BODY></HTML>
