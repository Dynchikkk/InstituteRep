<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width">
  <title></title>
  <link rel="stylesheet" href="../../index.css" />
  <link rel="stylesheet" href="../../menu.css" />
  <script src="../../gc.js" ></script>
</head>
<body>
    <div class="card-column">
        <div class="example-work">
            <a class="card-link" href="../../gallery/Примеры лабораторных работ.pdf" download="" target="_blank"></a>
            <img src="../../gallery/loon-icon 1.svg">
            <p>Образец работы</p>
        </div>
        <div class="theory-work">
            <a href="../theory/network_theory.html" class="card-link" target="_blank"></a>
            <p>Network Monitor</p>
        </div>
    </div>
    <nav class="nav-bar">
        <h4>Задания</h4>
        <div class="progress_bar" >
            <div class="progress_done" id="progress_done">
            </div>
        </div>
        <form id="tasks">
                <div class="task_line">
                   <input type="checkbox" class="check_box" name = "box1" onclick="update();"> <label class="text_box" for="box1"><a class="a-nav" href="#one">TCP-протокол</a></label>
                 </div>
                 <div class="task_line">
                    <input type="checkbox" class="check_box" name = "box2" onclick="update();"><label class="text_box" for="box2"><a class="a-nav" href="#two">Анализ заголовка</a></label>
                 </div>
                <div class="task_line">
                    <input type="checkbox" class="check_box" name = "box3" onclick="update();"><label class="text_box" for="box3"><a class="a-nav" href="#three">Контрольная ссума загаловка</a></label>
                </div>
    
        </form>
    </nav>
    <div class="wrapper">
        <h1>Работа №3</h1>
        <h2>Анализ протоколов транспортного уровня</h2>
        <div class="paragraph">
            <h3>Цель работы</h3>
            <p class="par_txt">Изучение и анализ протоколов транспортного уровня с помощью диагностических утилит операционной системы Windows и программных средств, позволяющих контролировать сетевой трафик на примере программы Network Monitor.</p>
            
        </div>
        <div class="paragraph">
            <h3>Теоретический материал</h3>
            <h4>Протоколы транспортного уровня</h4>
            <p class="par_txt">Протоколы транспортного уровня используются для установления соединения в сети. Наиболее часто используются TCP и UDP. Протоколы разбивают сообщение на пакеты у отправителя, добавляют к пакеты заголовок, который содержит индивидуальный номер и передают дальше по сети, на том же уровне на конечном узле сообщение собирается обратно, для идентификации получателя используются номера портов.</p>
            <h4>Протокол TCP</h4>
            <p class="par_txt"><strong>TCP (Transmission Control Protocol, протокол управления передачей)</strong> - протокол транспортного уровня в модели TCP/IP. Протокол передаёт сообщения только после предварительной установки соединения, что гарантирует безопасность и устраняет дублирование пакетов, в отличие от UDP. </p>
            <ol class="with-dot">Заголовок сегмента содержит следующие атрибуты:
                <li>Порт источника;</li>
                <li>Порт назначения;</li>
                <li>Порядковый номер пакета;</li>
                <li>Длина заголовка;</li>
                <li>Номер подтверждения (следующий номер последовательности, который ожидает получить отправитель подтверждения);</li>
                <li>Длина заголовка;</li>
                <li>Зарезервировано (3 бита, которые должны сброситься в 0);</li>
                <li>Флаги;</li>
                <li>Размер окна (ограничен и представляет из себя буфер обмена);</li>
                <li>Контрольная сумма;</li>
                <li>Указатель важности (значение смещения от порядкового номера в сегменте);</li>
                <li>Опции (необязательный параметр);</li>
                <li>Данные.</li>
            </ol>
            <ol class="with-dot">Для указания состояния соединения используются следующие флаги (в скобках указаны названия флагов, который отображаются в захвате кадров в программе Network Monitor):
                <li>URG (U) - срочность, пакеты с данными флагами передаются вне очереди;</li>
                <li>ACK (A) - успешный приём файлов, пакет отсылается обратно с номером подтверждения;</li>
                <li>PSH (P) - принудительная доставка данных для интерактивного трафика, до заполнения буфера;</li>
                <li>RST (R) - аварийное завершение сессии (например, закрытие браузера или проблемы с сетью);</li>
                <li>SYN (S) - отрытие сессии и получение начального номера (предотвращает DoS атаки);</li>
                <li>FIN (F) - добровольное завершение сессии.</li>
            </ol>
            <p class="par_txt">Сегмент может содержать несколько флагов, например, AS - квитанция об успешном подключении.</p>
            <p class="par_txt">Протокол действует в следующем порядке: установка соединения, передача данных, завершение соединения.</p>
            <h4>Контрольная сумма заголовка пакета</h4>
            <p class="par_txt"><strong>Контрольная сумма TCP (Checksum)</strong> - это сквозная контрольная сумма, рассчитанная отправляющей стороной и затем проверенная получающей стороной. Цель состоит в том, чтобы обнаружить любые изменения в заголовке TCP и данных между отправителем и получателем. Если получатель обнаружит ошибку в контрольной сумме, сегмент TCP будет отброшен напрямую.</p>
            <p class="par_txt">Контрольная сумма TCP охватывает заголовок TCP и данные TCP, в то время как контрольная сумма в заголовке IP охватывает только заголовок IP и не охватывает никаких данных в дейтаграмме IP. Методы расчета контрольной суммы TCP и контрольной суммы IP в основном одинаковы, за исключением того, что диапазон расчета отличается.</p>
            <ol class="no-padding">Рассмотрим на примере. Сначала рассчитывается контрольная сумма для следующей структуры:
                <li>Src IP: 0a b3 a1 e0</li>
                <li>Dst IP: 0a b3 a0 c8</li>
                <li>Zero: 00 (const)</li>
                <li>Proto: 06 (по смещению 9 в IP Header)</li>
                <li>TCP_Len: 00 14 (0x0028 - 0x14)</li>
            </ol>
            <p class="par_txt">TCP_Len складывается из: длина TCP Header, длина доп. опций, длина полезных данных. В данном случае только длина TCP Header.Считаем контрольную сумму: 0xB30A + 0xE0A1 + 0xB30A + 0xC8A0 + 0x0600 + 0x1400 = 0x032955</p>
            <p class="par_txt">Затем к этой контрольной сумме добавляем контрольную сумму от TCP Header: 05 92 0c 38 8a 17 6b fb e4 22 4f da 50 10 40 29 00 00 00 00</p>
            <p class="par_txt">Считаем: 0x032955 + 0x9205 + 0x380C + 0x178A + 0xFB6B + 0x22E4 + 0xDA4F + 0x1050 + 0x2940 + 0x0000 + 0x0000 = 0x032955 + 0x0313C9 = 0x063D1EПолученное значение "нормализуем": 0x0006 + 0x3D1E = 0x3D24 , NOT(0x3D24) = 0xC2DB</p>
            <h3>Задание</h3>
            <p class="par_txt">Создать и настроить Capture в программе Network Monitor. Как это сделать, написано в <a href="#">теоретическом материале.</a> А так же ознакомится с работой TCP протокола.</p>
        
        </div>
        <div class="paragraph">
            <a name="one"></a><h4>Изучить работу TCP-протокола</h4>
            <ol class="with-dot"><strong>Для этого:</strong>
                <li>Запустить окно захвата в сетевом мониторе;</li>
                <li>Открыть браузер и зайти на любой сайт, совершить несколько переходов, закрыть вкладку с сайтом и закрыть браузер;</li>
                <li>Остановить захват Capture;</li>
                <li>Отфильтровать запросы и оставить только TCP-кадры, представить разбор нескольких кадров в отчёте. Для фильтрации необходимо ввести «tcp» в поле «Display Filter» и нажать на кнопку «Applay».</li>
                
            </ol>
            <a name="two"></a> <h4>Проанализировать заголовки запросов и ответов и представить кадры с различными флагами в отчёте.</h4>
            <a name="three"></a><h4>Посчитать контрольную сумму ip заголовка для tcp пакета и представить в отчёте.</h4>
        </div>
    </div>
</body>
</html>