<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width">
  <title></title>
  <link rel="stylesheet" href="../../index.css" />
  <link rel="stylesheet" href="../../menu.css" />
  <script src="../../gc.js" ></script>
</head>
<body>
    <div class="card-column">
        <div class="example-work">
            <a class="card-link" href="../../gallery/Примеры лабораторных работ.pdf" download="" target="_blank"></a>
            <img src="../../gallery/loon-icon 1.svg">
            <p>Образец работы</p>
        </div>
        <div class="theory-work">
            <a href="../theory/network_theory.html" class="card-link" target="_blank"></a>
            <p>Network Monitor</p>
        </div>
        <div class="theory-work">
            <a href="../theory/totalcom_theory.html" class="card-link" target="_blank"></a>
            <p>Total Comander</p>
        </div>
    </div>
    <nav class="nav-bar">
        <h4>Задания</h4>
        <div class="progress_bar" >
            <div class="progress_done" id="progress_done">
            </div>
        </div>
        <form id="tasks">
                <div class="task_line">
                   <input type="checkbox" class="check_box" name = "box1" onclick="update();"> <label class="text_box" for="box1"><a class="a-nav" href="#one">FTP-протокол</a></label>
                 </div>
                 <div class="task_line">
                    <input type="checkbox" class="check_box" name = "box2" onclick="update();"><label class="text_box" for="box2"><a class="a-nav" href="#two">Анализ кадров</a></label>
                 </div>
                
        </form>
    </nav>
    <div class="wrapper">
        <h1>Работа №5</h1>
        <h2>Анализ протоколов прикладного уровня на примере FTP</h2>
        <div class="paragraph">
            <h3>Цель работы</h3>
            <p class="par_txt">Изучение и анализ протоколов прикладного уровня с помощью диагностических утилит операционной системы Windows, программных средств, позволяющих контролировать сетевой трафик на примере программы Network Monitor и FTP-клиента Total Commander. </p>
            <h3>Теоретический материал</h3>
            <h4>Протокол FTP</h4>
            <p class="par_txt"><strong>FTP (File Transfer Protocol)</strong> - протокол прикладного уровня модели TCP/IP передачи данных по сети, осуществляет доступ к удалённых директориям. В отличие от протокола HTTP, ему не нужен графический интерфейс, он представляет собой компьютер, к которому могут подключаться удалённые пользователи. Для связи, как правило, используется 21 порт.</p>
            <p class="par_txt">FTP так же как и HTTP использует структуру запроса клиент-сервер: сначала запрос о подключении, запрос на взаимодействие с файлом на сервере и запрос о подключении. На каждый запрос клиента сервер присылает ответ. </p>
            <table  class="without-border">
                <tr><td>DELE</td><td>250</td><td>Удалить файл</td></tr>
                <tr><td>RMD</td><td>250</td><td>Удалить директорию</td></tr>
                <tr><td>CWD</td><td>250</td><td>Перейти в директорию</td></tr>
                <tr><td>MKD</td><td>257</td><td>Создать директорию</td></tr>
                <tr><td>PWD</td><td>257</td><td>Узнать текущую директорию</td></tr>
                <tr><td>QUIT</td><td>221</td><td>Закончить работу</td></tr>
                <tr><td>TYPE</td><td>200</td><td>Установить тип передачи</td></tr>
                <tr><td>PORT</td><td>200</td><td>Перейти в активный режим</td></tr>
                <tr><td>PASV</td><td>227</td><td>Перейти в пассивный режим</td></tr>
                <tr><td>LIST</td><td>150,226</td><td>Получить содержимое каталога</td></tr>
                <tr><td>RETR</td><td>150,226</td><td>Скачать файл</td></tr>
                <tr><td>STOR</td><td>150,226</td><td>Залить файл</td></tr>
                <tr><td>ABOR</td><td>426,226</td><td>Отменить передачу</td></tr>
                <tr><td>RNFR</td><td>350</td><td>Выбрать файл для переименования</td></tr>
                <tr><td>RNTO</td><td>250</td><td>Переименовать файл</td></tr>
            </table>
            <p class="par_txt">FTP поддерживает множественное подключение. Через управляющий канал поступают команды (запросы), а через TCP-порт (обычно 21) возвращаются ответы. Это делает возможной передачу нескольких файлов одновременно.</p>
            <h4>Как работает FTP-сервер</h4>
            <p class="par_txt">Протокол FTP для передачи данных использует транспортный протокол TCP, причем, в отличие от большинства других протоколов, FTP использует сразу два TCP-соединения: одно для управления, а другое для собственно передачи данных. Порт 21 используется для передачи команд, а порт 20 для передачи данных (порт для канала дан¬ных может назначаться сервером и из нестандартных портов с но¬мерами > 1024). </p>
            <p class="par_txt">Служба FTP построена по хорошо известной схеме клиент сервер. FTP-клиент посылает запросы серверу и принимает фай¬лы. FTP-сервер обрабатывает запросы клиента на получение файла. Схема взаимодействия клиента и сервера показана на рисунке ниже.</p>
            <img src="../../gallery/48.jpg">
            <p class="par_txt">Возможны два режима установления соединений в протоколе FTP – активный и пассивный.</p>
            <ol class="with-dot">Действия сервера и клиента в активном режиме:
                <li>клиент инициирует TCP-соединение с динамического порта N (N > 1024) к порту номер 21 на FTP-сервере;</li>
                <li>сервер посылает ответ на порт N клиента; </li>
                <li>сервер устанавливает связь для передачи данных по порту 20 на порт клиента N+1.</li>
                <li>Действия сервера и клиента в пассивном режиме:</li>
                <li>клиент устанавливает связь и посылает запрос, сообщая, что надо работать в пассивном режиме, на 21-й порт сервера с динамического порта N (N > 1024);</li>
                <li>клиент устанавливает связь для передачи данных по порту N+1 на порт сервера P.</li>
            </ol>
            <p class="par_txt">Главное отличие между активным и пассивным режимами FTP – это та сторона, которая открывает соединение для передачи данных. В активном режиме клиент должен принять соединение от FTP-сер¬вера. В пассивном режиме клиент всегда инициирует соединение.</p>
            <p class="par_txt">Хотя активный FTP и удобен для сервера, но попытка соеди¬нения со стороны сервера с высокими (по номеру) портами на клиенте будет блокирована брандмауэром на стороне клиента.</p>
            <p class="par_txt">Пассивный режим предназначен для соединения через бран¬д¬мауэр на стороне клиента, инициатором установления всех соединений является FTP-клиент.</p>

            <h4>FTP сервер и файловые менеджеры</h4>
            <p class="par_txt">Доступ к FTP-серверу может осуществляться с помощью файловых менеджеров, например Total Commander, или через браузер, однако в внешний вид будет отличаться.</p>
            <p class="par_txt">Так выглядит FTP-сервер кафедры в файловом менеджере:</p>
            <img src="../../gallery/42.jpg" >
            <p class="par_txt">А так - в окне браузера.</p>
            <img src="../../gallery/43.jpg" >
            <p class="par_txt">Так же при подключении через браузер, пользователь сможет только просматривать файлы или скачивать их, FTP-клиент предоставляет больше возможностей таких как копирование, перемещение, удаление и изменение.</p>
            <h3>Задание</h3>
            <p class="par_txt">Создать и настроить Capture в программе Network Monitor. Как это сделать, написано в <a href="#">теоретическом материале.</a></p>
            
            <ol class="with-marker"><strong>Данные для подключения к серверу:</strong>
                <li><strong>Адрес:</strong> netvp@192.168.10.251</li>
                <li><strong>Пароль:</strong> netvp1</li>
            </strong>

            </ol>
        </div>
        <div class="paragraph">
            <a name="one"></a><h4>Изучить работу FTP-протокола</h4>
            <ol class="with-dot"><strong>Для этого:</strong>
                <li>Запустить окно захвата в сетевом мониторе;</li>
                <li>Открыть Total Comander и подключиться к FTP-серверу Подробнее об этом в <a href="#">теоретическом материале;</a></li>
                <li>Произвести изменение файла на сервере, а затем скопировать его на ПК;</li>
                <li>Остановить захват Capture;</li>
                <li>Отфильтровать запросы и оставить только FTP-кадры, представить разбор нескольких кадров в отчёте. Для фильтрации необходимо ввести «ftp» в поле «Display Filter» и нажать на кнопку «Applay».</li>
            </ol>
            <a name="two"></a><h4>Проанализировать кадры</h4>
            <p class="par_txt">Проанализировать и сравнить кадры, захваченные в программах Network Monitor и Total Commander.</p>
        </div>
    </div>
</body>
</html>