<html><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">



<body background="../images/bgrwhite.gif">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
 <TITLE>Дэвид Дж. Брэдли</TITLE>
<h3>9.11.2. Команды чтения и записи</h3>

<p>
Команды чтения и записи испоьзуют регистры микропроцессора 8088 как входные параметры. Эти параметры указывают дорожку, сектор, головку и дисковод, на котором должна выполняться операция. Парой регистров ES:BX вызывающая программа указывает буфер, и драйвер дисковода запускает операцию ПДП в этом буфере. Подпрограмма DMA_SETUP вычисляет физический адрес буфера. Эта программа также вычисляет общее число пересылаемых байт, используя входной параметр, задающий количество секторов, а также табличный параметр - размер сектора. Затем эта программа посылает значение счетчика и  адрес в контроллер ПДП. Заметим, что эта программа определяет перекрытие буфером границы области размером 64K. Поскольку четырехбитовый регистр страницы не изменяется при передаче данных, то если адрес ПДП переходит через значение 0FFFFH, передача данных будет неверной. Эта программа сигнализирует об ошибке, не допуская выполнения ошибочной операции ввода-вывода.
<p>
<table align="center">
  <tr> <th>AH</th> <th>Функция</th> </tr>
  <tr> <td class="center">0</td> <td>Инициализация адаптера дисковода</td> </tr>
  <tr> <td class="center">1</td> <td>Читать состояние от последней операции</td> </tr>
  <tr> <td class="center">2</td> <td>Чтение с диска в память</td> </tr>
  <tr> <td class="center">3</td> <td>Запись из памяти на диск</td> </tr>
  <tr> <td class="center">4</td> <td>Проверка дискеты</td> </tr>
  <tr> <td class="center">5</td> <td>Форматирование дорожки дискеты</td> </tr>
</table>
<p class="center">
Фиг. 9.4 Функции BIOS для дисковода

<p><div align="center"><a href="../index.html"><img src="../images/index.gif" border=0 alt=""></a></div><p></p>

</body>
</html>
