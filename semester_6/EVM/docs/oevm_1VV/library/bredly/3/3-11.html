<html><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">



<body background="../images/bgrwhite.gif">
<LINK REL="stylesheet" TYPE="text/css" HREF="../default.css">
<head>
	<TITLE>Дэвид Дж. Брэдли</TITLE>
</head>



<h2>3.11. Предназначение сегментов</h2>

<p>
Каждый из сегментных регистров имеет свое, отмеченное выше назначение. В некоторых случаях, однако, более удобна связь с данными вне сегмента данных, например, с небольшой областью данных в программе. В большинстве случаев программа работает с данными в той области, на которую указывает регистр DS, но иногда программе требуется ссылка на локальную переменную, находящуюся в кодовом сегменте программы. Чтобы осуществитьэту ссылку, приходится изменять обычное использование сегментов. Фиг.3.8 показывает такую органзацию программы.
<p>
<table align="center">
  <tr><th>Сегмент</th><th>Программа и локальные данные</th></tr>
  <tr>
     <td class="center">CS</td>
     <td>CS:LOCAL_VALUE</td>
  </tr>
  <tr>
     <td class="center">DS</td>
     <td>DS:Основная область даных</td></tr>
  
</table>
<p class="center">     
Фиг. 3.8 Переназначение CS на локальные данные.
<p>
Вместо изменения значения регистра DS, чтобы он указывал на программный сегмент, команда изменяет ссылку на данные, показывая, что переменная расположена в сегменте
кодов (Code Segment).
<dir>
<TT>
<b?
INC    CS:LOCAL_VARIABLE
>/B>
</TT>
</DIR>
<p>
Это делается с помощью префикса &quot;CS:&quot;. В машинном языке команда переопределения сегмента выглядит как однобайтовый префикс перед обычной командой машинного языка. 8088
понимает этот префикс переназначения сегмента и изменяет обычный способ вычисления адреса. Вместо регистра DS процессор использует для вычисления физического адреса данных регистр CS. Одного префикса в команде всегда достаточно, таккак 8088 может адресоваться в ней не более чем к одной ячейке памяти. Для нормального обращения к данным команда может использовать любой из четырех сегментных регистров. Регистр DS используется по умолчанию, то есть когда в команде не указан другой сегментный регистр, то используется DS. Помните, что при использовании в адресных вычислениях регистра BP сегментом по умолчанию становится стековый сегмент. Команда может определить и любой из трех других сегментных регистров, указав его в адресном выражении. Некоторые команды, правда,не могут пользоваться переназначением сегментов. Это - команды обработки строк. Строковая команда определяет использование регистров неявным образом, и оно не может быть изменено. В главе 4 мы обсудим строковые команды и их специфическое пользование сегментами.
<p><div align="center"><a href="../index.html"><img src="../images/index.gif" border=0 alt=""></a></div><p></p>

</body>
</html>
