<html><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">



<body background="../images/bgrwhite.gif">
<LINK REL="stylesheet" TYPE="text/css" HREF="../default.css">
<head>
	<TITLE>Дэвид Дж. Брэдли</TITLE>
</head>



<h3>3.14.10. Флаг захвата</h3>

<p>
Флаг захвата (специального прерывания) TF помогает при отладке программ. Этот флаг устанавливается не в результате работы микропроцессора, а - программой, с помощью специальной команды. Этот флаг называется также флагом трассировки или шага.
<p> 
Когда этот флаг установлен, после выполнения каждой команды возникает прерывание. Эффект при этом такой же, как если бы после каждой команды некоторое внешнее устройство запрашивало прерывание. Прерывание по трассировке передает управление в ячейку, определенную вектором прерывания 4. Во время процедуры прерывания микропроцессор сбрасывает флаг специального прерывания. Это позволяет программе обработки прерывания по трассировке избежать прерывания после каждой команды. Когда обработчик прерывания по трассировке возвращает управление
программе пользователя, он восстанавливает начальное состояние регистра флагов, в котором флаг трассировки установлен. Микропроцессор выполняет следующую команду пользователя, и снова  возникает специальное прерывание. Обработчик прерываний по трассировке получает управление после каждой команды до тех пор, пока программа пользователя не сбросит флаг захвата.
<p> 
Отладчик DOS использует флаг трассировки. Одной из функций отладчика является пошаговое выполнение, при котором перед каждым возвращением управления к отладчику выполняется одна команда программы пользователя. Это прерывание инициируется флагом захвата. Полное описание процедуры прерывания дано в разделе &quot;Векторы прерываний&quot;.

<p><div align="center"><a href="../index.html"><img src="../images/index.gif" border=0 alt=""></a></div><p></p>

</body>
</html>
