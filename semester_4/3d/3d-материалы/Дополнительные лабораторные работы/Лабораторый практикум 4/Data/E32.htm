<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Аффинные преобразования в пространстве</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<style type="text/css">
<!--
body {
	background-image: url(Fon.jpg);
}
.style1 {
	color: #009900;
	font-weight: bold;
	font-style: italic;
}
-->
</style>
</head>
<body>
<h2 align="center" class="style1">Аффинные преобразования в пространстве</h2>
<p align="justify">В трехмерном пространстве точка имеет координаты <em>(</em><em>x</em><em>, </em><em>y</em><em>, </em><em>z</em><em>) </em>. Аналогично тому, как двухмерные преобразования описываются матрицами размером 3<em>&#215</em>3, трехмерные преобразования могут быть представлены в виде матриц размером 4<em>&#215</em>4. Тогда трехмерная точка <em>(</em><em>x</em><em>, </em><em>y</em><em>, </em><em>z</em><em>) </em> записывается в однородных координатах как <em>(</em><em>W </em><em>&#215 </em><em>x</em><em>, </em><em>W </em><em>&#215 </em><em>y</em><em>, </em><em>W </em><em>&#215 </em><em>z</em><em>) </em>, где <em>W</em><em><strong><img src="im4%20(0).gif" width="20" height="17" align="absmiddle"></strong></em><em>0 </em>. Если <em>W<strong><img src="im4%20(0).gif" width="20" height="17" align="absmiddle"></strong></em><em>1 </em>, то для получения трехмерных декартовых координат точки <em>(</em><em>x</em><em>, </em><em>y</em><em>, </em><em>z</em><em>) </em> первые три однородные координаты делятся на <em>W </em>. Отсюда, в частности, следует, что две токи <em>H<sub>1</sub></em> и <em>H<sub>2</sub></em> в пространстве однородных координат описывают одну и ту же точку трехмерного пространства в том и только в том случае, когда <em>H<sub>1</sub></em><em>=с</em><em>H<sub>2</sub> </em> для любой константы <em>c </em>, не равной нулю. </p>
<p align="justify">Система координат является <em>правосторонней </em>. Положительными считаются такие повороты, при которых (если смотреть с конца положительной полуоси в направлении начала координат) <em>поворот на 90</em><em>° </em><em> против часовой стрелки </em> будет переводить одну положительную полуось в другую. На основе данного соглашения строится таблица 1: </p>
<p align="justify">Любое аффинное преобразование в трехмерном пространстве может быть представлено в виде суперпозиции вращения, растяжения или сжатия, отражения и переноса. </p>
<p align="center">Таблица 1</p>
<div align="justify">
  <table width="70%" border="1" align="center" cellpadding="0" cellspacing="0" bordercolor="#999999">
    <tr>
      <td width="266" valign="top"><p align="center">Ось вращения </p></td>
      <td width="245" valign="top"><p align="center">Положительный поворот </p></td>
    </tr>
    <tr>
      <td width="266" valign="top"><p align="center"><strong><em>X </em></strong><strong><em></em></strong></p></td>
      <td width="245" valign="top"><p align="center"><strong><em>от Y к Z </em></strong></p></td>
    </tr>
    <tr>
      <td width="266" valign="top"><p align="center"><strong><em>Y </em></strong><strong><em></em></strong></p></td>
      <td width="245" valign="top"><p align="center"><strong><em>от Z к X </em></strong></p></td>
    </tr>
    <tr>
      <td width="266" valign="top"><p align="center"><strong><em>Z </em></strong><strong><em></em></strong></p></td>
      <td width="245" valign="top"><p align="center"><strong><em>от X к Y </em></strong></p></td>
    </tr>
  </table>
</div>
<p align="justify"><strong>Трехмерный перенос </strong> является простым расширением двухмерного переноса: </p>
<p align="center"><em>T ( D<sub>x</sub> , D<sub>y</sub> , D<sub>z</sub> ) = <img src="im4%20(12).gif" width="122" height="99" align="middle"> , </em></p>
<p align="center"><em>[ x' y' z' 1] = [ x y z 1] &#215 T ( D<sub>x </sub>, D<sub>y </sub>, D<sub>z</sub> ) = [ x + D<sub>x</sub> , y + D<sub>y</sub> , z + D<sub>z </sub>, 1]. </em></p>
<p align="justify"><strong>Масштабирование в трехмерном пространстве </strong> может быть получено расширением двухмерного масштабирования аналогично переносу: </p>
<p align="center"><em>S(S<sub>x</sub> , S<sub>y</sub> , S<sub>z</sub>  ) = <img src="im4%20(13).gif" width="104" height="83" align="middle"></em> , </p>
<p align="center"><em>[x' y' z' 1] = [x y z 1] &#215 S(S<sub>x</sub> , S<sub>y</sub> , S<sub>z</sub> ) = [x &#215 S<sub>x</sub> , y &#215 S<sub>y</sub> , z &#215 S<sub>z</sub> , 1]. </em></p>
<p align="justify">Двухмерный поворот является в то же время трехмерным поворотом вокруг оси <strong><em>z </em></strong>. <strong>В трехмерном пространстве поворот </strong> вокруг оси <strong><em>z </em></strong> описывается выражением: </p>
<p align="center"><em>R<sub>z</sub> ( &#920 ) = <img src="im4%20(14).gif" width="169" height="97" align="middle"></em>, </p>
<p align="justify">Матрица поворота вокруг оси <strong><em>x </em></strong> имеет вид </p>
<p align="center"><em>R<sub>x</sub> ( &#920 ) = </em><em><img src="im4%20(15).gif" width="165" height="96" align="middle"></em>, </p>
<p align="justify">Матрица поворота вокруг оси <strong><em>y </em></strong> имеет вид </p>
<p align="center"><em>R<sub>y</sub> ( &#920 ) = </em><em><img src="im4%20(16).gif" width="169" height="98" align="middle"></em>, </p>
<p align="justify">Необходимо отметить, что трехмерное вращения не коммутативно. </p>
<p align="justify">Столбцы (и строки) верхней левой матрицы размером 3<em>&#215</em>3 матриц <em>R<sub>z</sub> ( &#920 )</em>, <em>R<sub>x</sub> ( &#920 )</em>, и <em>R<sub>y</sub> ( &#920 )</em> представляет собой взаимно ортогональные единичные векторы, интерпретация которых такая же, что и в 2-х мерном случае. </p>
<p align="justify">Матрицы переноса, масштабирования и поворотов имеют обратные матрицы. Матрица, обратная <em>T </em>, получается подстановкой знака минус перед <em>D<sub>x</sub> , D<sub>y</sub> , D<sub>z</sub> </em>; обратная <em>S </em> - заменой <em>S<sub>x</sub> , S<sub>y</sub> , S<sub>z</sub></em> на обратные им значения, а для каждой из матриц поворота - выбором отрицательного угла поворота. </p>
<p align="justify">Можно рассматривать композицию произвольного числа поворотов, масштабирования и переноса, перемножая соответствующие матрицы. Результат всегда будет иметь вид матрицы 4<em>&#215</em> 4 </p>
<p align="center"><img src="im4%20(17).gif" width="120" height="81" align="middle"> ,</p>
<p align="justify"> где матрица <em>R </em>(3<em>&#215</em> 3) описывает суммарный поворот и масштабирование, матрица <em>T </em>(1<em>&#215</em> 3) - перенос. </p>
<p align="justify">Матрица <em>R </em> - ортогональная матрица, т.к. ее столбцы являются взаимно ортогональными единичными векторами. При повороте, задаваемом матрицей, эти единичные векторы совмещаются с осями x , y , z . </p>
<p align="justify">Для ортогональной матрицы <em>R </em> ее обратная матрица совпадает с транспонированной, т. е. <em>R<sup>-1</sup> = R T </em>. При реализации <em>R<sup>-1</sup></em> не вычисляют, а выборку из матрицы делают перестановкой индексов строки и столбца. </p>
<p align="justify">С точки зрения быстродействия проведения вычислений выгоднее выполнять преобразования явно: </p>
<p align="center"><em>[x' y' z'] = [x y z]&#215</em><em>R + T</em>. </p>
<p align="justify">В некоторых случаях, так же как и в 2-х мерном преобразовании, удобнее выполнять композицию преобразований. </p>
<p align="justify">Пусть необходимо построить матрицу вращения на угол <em><strong>&#966</strong><strong><em></em></strong></em> вокруг прямой <em>L </em>, проходящей через точку <em>A(a, b, c) </em> и имеющую направляющий вектор <em>(</em><em>l</em><em>, </em><em>m</em><em>, </em><em>n</em><em>) </em>. Можно считать, что направляющий вектор прямой является единичным: <em>l<sup>2</sup>+m<sup>2</sup>+n<sup>2</sup> = 1 </em>. Рассматриваемая процедура заключается в последовательном переносе изображения и заданной прямой таким образом, чтобы поворот осуществлялся вокруг одной из координатных осей. Затем выполняется обратный перенос. </p>
<p align="justify">Решение задачи разбивается на несколько шагов: </p>
<ol>
  <li>
    <div align="justify"> линейный перенос к началу координат; </div>
  </li>
  <li>
    <div align="justify"> два вращения вокруг координатных осей для совмещения прямой <em>L </em> с осью аппликат; </div>
  </li>
  <li>
    <div align="justify"> перенос в обратном направлении в исходное состояние. </div>
  </li>
</ol>
<p align="justify">Перемножив матрицы в порядке их построения, получим результирующую матрицу: </p>
<p align="center"><strong><em>M = T<sub>A</sub>&#215R<sub>x</sub>&#215R<sub>y</sub>&#215 R<sub>z</sub>&#215 R<sub>z</sub><sup>-1</sup>&#215 R<sub>y</sub><sup>-1</sup>&#215 R<sub>x</sub><sup>-1</sup>&#215 T<sub>A</sub><sup>-1</sup>. </em></strong></p>
<p align="justify">Для решения задачи преобразования выпуклого многогранника сначала по геометрическому описанию отображения находим его матрицу [ <strong><em>M </em></strong>]. Произвольный выпуклый многогранник однозначно задается набором всех его вершин, т.е. множеством троек вида <em>v<sub>i</sub> (x<sub>i</sub> , y<sub>i</sub> , z<sub>i</sub>) </em>, <em>i = 1... n </em> или матрицей следующего вида </p>
<p align="center"><strong><em>V =</em></strong> <img src="im4%20(18).gif" width="127" height="88" align="middle">. </p>
<p align="justify">Подвергая этот набор преобразованию, описываемого найденной невырожденной матрицей четвертого порядка, получаем набор вершин нового выпуклого многогранника - образа исходного:</p>
<p align="center"><em><strong> [V' ] = [ V ][ M ] .</strong></em></p>

</body>
</html>
