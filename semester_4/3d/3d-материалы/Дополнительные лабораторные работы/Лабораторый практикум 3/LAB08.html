<html>

<head>
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<meta NAME="GENERATOR" CONTENT="Microsoft FrontPage 3.0">
<meta NAME="GENERATOR" CONTENT="Mozilla/4.05 [en] (Win95; I) [Netscape]">
<title>Лабораторная работа N8</title>
</head>

<body background="fon.jpg">

<hr size="1" width="100%" noshade color="gray" align="center">

<table BORDER="0" CELLPADDING="0" WIDTH="100%"
style="width:100.0%;mso-cellspacing:
 1.5pt">
  <tr>
    <td style="background:#8189BC;padding:.75pt .75pt .75pt .75pt"><p align="center"><b>Лабораторная
    работа №8.</b> </td>
  </tr>
</table>

<blockquote>
  <font SIZE="+2" COLOR="#000080"><b><p align="center">АЛГОРИТМЫ ГЕНЕРАЦИИ
  ОТРЕЗКОВ В РАСТРОВОЙ ГРАФИКЕ</b></font> </p>
</blockquote>

<p align="justify"><a NAME="b1"></a><font FACE="Times New Roman"><b>Цель работы:</b>
изучить альтернативные алгоритмы отображения
отрезков прямых линий в пиксельную матрицу,
сравнить характеристики алгоритмов.</font> </p>

<p ALIGN="JUSTIFY"><a NAME="b2"></a><b><font FACE="Times New Roman">Порядок
выполнения работы:</font></b> </p>

<ul>
  <li><font FACE="Times New Roman">изучить <u><font COLOR="#0000FF"><a HREF="#b3">теоретическую
    часть </a></font></u></font>;</li>
  <li>получить задание, включающее координаты точек
    отрезков;</li>
  <li>выполнить неавтоматизированную проработку
    алгоритмов построения отрезков симметричным
    ЦДА, простым ЦДА и алгоритмом Брезенхема;</li>
  <li><font FACE="Times New Roman">подготовить <a HREF="#b3">исходные
    данные </a>и выполнить </font>остроение траекторий на
    ЭВМ<font FACE="Times New Roman"> <a HREF="#as1">экспериментальная
    часть;</a></font></li>
  <li>исследовать характеристики траекторий,
    полученных различными алгоритмами, оформить
    отчет по работе<font FACE="Times New Roman">;</font></li>
  <li><font FACE="Times New Roman">ответить на <a HREF="#b5">контрольные
    вопросы </a>.</font></li>
</ul>

<p ALIGN="JUSTIFY"><font COLOR="#0000FF" FACE="Times New Roman"><u><a HREF="#b6">Список
рекомендуемой литературы</a></u></font> </p>

<p ALIGN="JUSTIFY"><a NAME="b3"></a><u><font FACE="Arial">Теоретическая
часть</font></u> </p>

<p ALIGN="JUSTIFY">Построение отрезков является наиболее
часто используемой задачей растровой графики,
поскольку отрезками прямых аппроксимиру­ются
объекты искривленной формы. К развертке отрезка
предъявляются следующие требования: </p>

<ul>
  <li>минимальное отклонение на рис.1. от идеального
    отрезка; </li>
  <li>постоянная плотность и ее независимость от
    длины и наклона отрезка; </li>
  <li>минимальная временная сложность развертки. </li>
</ul>

<p align="center"><img src="LAB08/clip_image027.gif" width="167" height="119"
alt="clip_image027.gif (1329 bytes)"></p>

<p align="center">Рис.4. Отклонение траектории от
идеального отрезка.</p>

<p ALIGN="JUSTIFY">Наиболее известными алгоритмами
развертки являются алгоритмы Брезенхема,
цифрового дифференциального анализатора (ЦДА) -
симметричный и простой.</p>

<p ALIGN="JUSTIFY">Симметричный ЦДА. Суть ЦДА заключается
в параллельном (одновременном) приращении
значений Х- и Y-координат к дробным частям
координат предыдущей точки траектории на
некоторую малую величину (дифференциал) <img
src="LAB08/clip_image001.gif" width="51" height="23" alt="clip_image001.gif (255 bytes)">
с последующим округлением до ближайших целых
значений, т.е. координат пикселов:</p>

<p align="center"><img src="LAB08/clip_image002.gif" width="271" height="23"
alt="clip_image002.gif (593 bytes)"></p>

<p>где [ ] - обозначение дробной, а ] [ - целой части.</p>

<p>В симметричном ЦДА величины <img src="LAB08/clip_image006.gif"
width="22" height="20" alt="clip_image006.gif (199 bytes)"> и <img
src="lab081/clip_image007.gif" width="23" height="23" alt="clip_image007.gif (212 bytes)">
выбираются по следующим соотношениям:</p>

<p align="center"><img src="LAB08/clip_image008.gif" width="83" height="20"
alt="clip_image008.gif (270 bytes)">;<img src="LAB08/clip_image009.gif" width="86"
height="23" alt="clip_image009.gif (293 bytes)">,</p>

<p>где <img src="lab081/clip_image003.gif" width="57" height="23"
alt="clip_image003.gif (256 bytes)"> <span <p ALIGN="JUSTIFY">горизонтальная
и вертикальная составляющие отрезка, <img
src="lab081/clip_image004.gif" width="10" height="12" alt="clip_image004.gif (176 bytes)">
- &nbsp; коэффициент, равный: <img src="LAB08/clip_image005.gif"
width="54" height="17" alt="clip_image005.gif (230 bytes)">, а показатель
степени выбирается из условия:</p>

<p align="right"><img src="LAB08/clip_image010.gif" width="200" height="30"
alt="clip_image010.gif (592 bytes)">,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(1)</p>

<p ALIGN="JUSTIFY">Такой выбор обеспечивает преимущества
метода: контролируется изменение переменных х и
у; обеспечивается высокая точность развертки - <img
src="LAB08/clip_image011.gif" width="53" height="23" alt="clip_image011.gif (252 bytes)">
не превышают половины шага пиксельной матрицы.
Покажем работу ЦДА на примере. Пусть координаты
начала отрезка (в пикселах) составляют <img
src="LAB08/clip_image012.gif" width="116" height="20" alt="clip_image012.gif (324 bytes)">
а координата его конца - <img src="LAB08/clip_image013.gif" width="117"
height="20" alt="clip_image013.gif (329 bytes)"> т.е. <img src="LAB08/clip_image014.gif"
width="113" height="23" alt="clip_image014.gif (321 bytes)">.</p>

<p ALIGN="JUSTIFY">Вычисляем из условия (1) число шагов
развертки n=3, т.е. коэффициент <img src="lab081/clip_image004.gif"
width="10" height="12" alt="clip_image004.gif (176 bytes)"> =1/8, а приращения
равны: <img src="LAB08/clip_image015.gif" width="187" height="23"
alt="clip_image015.gif (450 bytes)">.</p>

<p ALIGN="JUSTIFY">Тогда координаты точек растровой
развертки данного отрезка по шагам приращений
представлены в табл.1.</p>

<p align="center">Таблица 1<a NAME="b5"></a>.</p>

<table border="1" width="100%">
  <tr>
    <td width="10%" align="center">Шаг</td>
    <td width="10%" align="center">1</td>
    <td width="10%" align="center">2</td>
    <td width="10%" align="center">3</td>
    <td width="10%" align="center">4</td>
    <td width="10%" align="center">5</td>
    <td width="10%" align="center">6</td>
    <td width="10%" align="center">7</td>
    <td width="10%" align="center">8</td>
    <td width="10%" align="center">9</td>
  </tr>
  <tr>
    <td width="10%" align="center">Х</td>
    <td width="10%" align="center">1</td>
    <td width="10%" align="center">1</td>
    <td width="10%" align="center">2</td>
    <td width="10%" align="center">2</td>
    <td width="10%" align="center">3</td>
    <td width="10%" align="center">4</td>
    <td width="10%" align="center">4</td>
    <td width="10%" align="center">5</td>
    <td width="10%" align="center">6</td>
  </tr>
  <tr>
    <td width="10%" align="center">У</td>
    <td width="10%" align="center">2</td>
    <td width="10%" align="center">2</td>
    <td width="10%" align="center">2</td>
    <td width="10%" align="center">2</td>
    <td width="10%" align="center">3</td>
    <td width="10%" align="center">3</td>
    <td width="10%" align="center">3</td>
    <td width="10%" align="center">3</td>
    <td width="10%" align="center">4</td>
  </tr>
</table>

<p ALIGN="JUSTIFY">Простой ЦДА. В алгоритме простого ЦДА
одно из приращений - <img src="lab081/clip_image006.gif" width="22"
height="20" alt="clip_image006.gif (199 bytes)"> или <img
src="lab081/clip_image007.gif" width="23" height="22" alt="clip_image007.gif (212 bytes)">,
а именно то, которое соответствует более быстро
меняющейся координате (при <img src="LAB08/clip_image016.gif"
width="69" height="23" alt="clip_image016.gif (272 bytes)"> это <img
src="lab081/clip_image006.gif" width="22" height="20" alt="clip_image006.gif (199 bytes)">,
а при <img src="LAB08/clip_image017.gif" width="69" height="23"
alt="clip_image017.gif (272 bytes)"> это <img src="lab081/clip_image007.gif" width="23"
height="23" alt="clip_image007.gif (212 bytes)">) фиксируется на всех
шагах равный единице, т.е. одна из координат
является обыкновенным счетчиком, а увеличение
другой координаты развертки определяется в
соответствии с приведенным ниже алгоритмом.</p>

<p ALIGN="JUSTIFY">Процедура ЦДА (<img src="lab081/clip_image018.gif"
width="68" height="20" alt="clip_image018.gif (268 bytes)"><img
src="lab081/clip_image019.gif" width="64" height="20" alt="clip_image019.gif (265 bytes)">:
целые);</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Переменные ДЛИНА, I:целые;
X,Y,ПРИРАЩЕНИЕ_X, ПРИРАЩЕНИЕ_ Y:Вещественные;</p>

<p ALIGN="JUSTIFY">Начать (</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Длина :=ABS(<img src="lab081/clip_image020.gif"
width="77" height="20" alt="clip_image020.gif (269 bytes)">);</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Если ABS( <img src="lab081/clip_image021.gif"
width="66" height="20" alt="clip_image021.gif (253 bytes)">) &gt; ДЛИНА то
ДЛИНА:= ABS(<img src="lab081/clip_image021.gif" width="66" height="20"
alt="clip_image021.gif (253 bytes)">);</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; ПРИРАЩЕНИЕ_X:= (<img
src="lab081/clip_image020.gif" width="77" height="20" alt="clip_image020.gif (269 bytes)">)
/ ДЛИНА;</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; ПРИРАЩЕНИЕ_ Y:= (<img
src="lab081/clip_image021.gif" width="66" height="20" alt="clip_image021.gif (253 bytes)">)
/ ДЛИНА;</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; <img src="LAB08/clip_image022.gif" width="216"
height="20" alt="clip_image022.gif (435 bytes)">;</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Цикл I:=1 до ДЛИНА;</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Начать</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Вывести (Целая
часть (X), Целая часть (Y)); </p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X:=X+
ПРИРАЩЕНИЕ_X; </p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y:=Y+ ПРИРАЩЕНИЕ_
Y;</p>

<p ALIGN="JUSTIFY">Конец;</p>

<p ALIGN="JUSTIFY">Конец;</p>

<p ALIGN="JUSTIFY">Точность простого ЦДА равна
симметричному, но он генерирует другую
последовательность точек растра. Он отличается
более простой логикой.</p>

<p ALIGN="JUSTIFY">Для примера отрезка, приведенного в
симметричном ЦДА, координаты пикселов,
вычисленных по простому ЦДА, приведены в табл.2.</p>

<p ALIGN="center">Таблица 2. </p>

<table border="1" width="100%">
  <tr>
    <td width="14%" align="center">Шаг</td>
    <td width="14%" align="center">1</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">3</td>
    <td width="14%" align="center">4</td>
    <td width="15%" align="center">5</td>
    <td width="15%" align="center">6</td>
  </tr>
  <tr>
    <td width="14%" align="center">Х</td>
    <td width="14%" align="center">1</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">3</td>
    <td width="14%" align="center">4</td>
    <td width="15%" align="center">5</td>
    <td width="15%" align="center">6</td>
  </tr>
  <tr>
    <td width="14%" align="center">У</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">3</td>
    <td width="14%" align="center">3</td>
    <td width="15%" align="center">4</td>
    <td width="15%" align="center">6</td>
  </tr>
</table>

<p ALIGN="JUSTIFY">Алгоритм Брезенхема. Для него
характерно сходство с простым ЦДА, поскольку на
каждом шаге значение более быстроменяющейся
координаты возрастает на единицу, а второй - либо
меняется, либо остается прежним.</p>

<p ALIGN="JUSTIFY">Погрешность каждой очередной
рассчитанной точки растра равна расстоянию от
нее до идеального отрезка в направлении,
перпен­дикулярном более быстроменяющемуся
(рис.2. ). </p>

<p ALIGN="center"><img src="LAB08/clip_image028.gif" width="170" height="130"
alt="clip_image028.gif (882 bytes)"></p>

<p ALIGN="center">Рис.2. Погрешность в алгоритме
Брезенхема</p>

<p ALIGN="JUSTIFY">Суть алгоритма заключается в том, что
на каждом шаге постро­ения развертки
коэффициент наклона <img src="LAB08/clip_image023.gif" width="66"
height="24" alt="clip_image023.gif (279 bytes)"> суммируется с ошибкой
L. Предварительно анализируется знак L, по
которому определяется, должна ли измениться
координата текущей точки. Если идеальный отрезок
выше текущей точки, то Y=Y+ПРИРАЩЕНИЕ_Y, а из
погрешности L вычитается единица. Если точка выше
идеального отрезка, то Y не меняется. Ниже
приведено описание алгоритма:</p>

<p ALIGN="JUSTIFY">Процедура БРЕЗЕНХЕМ <img
src="lab081/clip_image018.gif" width="68" height="20" alt="clip_image018.gif (268 bytes)"><img
src="lab081/clip_image019.gif" width="64" height="20" alt="clip_image019.gif (265 bytes)">:
целые);</p>

<p ALIGN="JUSTIFY">Переменные X,Y, <img src="lab081/clip_image003.gif"
width="57" height="23" alt="clip_image003.gif (256 bytes)">:&nbsp;&nbsp;&nbsp;&nbsp;
Целые; &nbsp;&nbsp;&nbsp; L:&nbsp;&nbsp;&nbsp; Вещественное;</p>

<p ALIGN="JUSTIFY">Начать</p>

<p>&nbsp;&nbsp;&nbsp; L:=(<img src="lab081/clip_image003.gif" width="57" height="23"
alt="clip_image003.gif (256 bytes)">) - 0,5;</p>

<p>&nbsp;&nbsp;&nbsp; Цикл I:=1 до <img src="LAB08/clip_image024.gif" width="26"
height="20" alt="clip_image024.gif (207 bytes)"> </p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Вывести (X,Y);</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Если L&gt;0 то</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Y:=Y+1;</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; L:=L-1;</p>

<p ALIGN="JUSTIFY">&nbsp;&nbsp;&nbsp; Конец;</p>

<p ALIGN="JUSTIFY">X:=X+1;</p>

<p ALIGN="JUSTIFY">L:=L+(<img src="lab081/clip_image003.gif" width="57" height="23"
alt="clip_image003.gif (256 bytes)">);</p>

<p ALIGN="JUSTIFY">Конец;</p>

<p ALIGN="JUSTIFY">Недостатком алгоритма является
многочисленное деление. Для примера,
рассмотренного в ЦДА, последовательность точек
растра имеет следующие координаты (табл. 3): </p>

<p align="center">Таблица 3.</p>

<table border="1" width="100%">
  <tr>
    <td width="14%" align="center">Шаг</td>
    <td width="14%" align="center">1</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">3</td>
    <td width="14%" align="center">4</td>
    <td width="15%" align="center">5</td>
    <td width="15%" align="center">6</td>
  </tr>
  <tr>
    <td width="14%" align="center">Х</td>
    <td width="14%" align="center">1</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">3</td>
    <td width="14%" align="center">4</td>
    <td width="15%" align="center">5</td>
    <td width="15%" align="center">6</td>
  </tr>
  <tr>
    <td width="14%" align="center">У</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">2</td>
    <td width="14%" align="center">3</td>
    <td width="14%" align="center">3</td>
    <td width="15%" align="center">4</td>
    <td width="15%" align="center">4</td>
  </tr>
</table>

<p ALIGN="JUSTIFY"><a NAME="as1"><u><font FACE="Arial">Экспериментальная
часть</font></u></a></p>

<ol>
  <li>Выбрать в директории LABMG файл программы
    построений отрезков <a href="PROG/VEC/Vector.exe">VECTOR.EXE</a>;. </li>
  <li>Выбрать из текстового меню пункт &quot;Алгоритм
    ЦДА&quot; или &quot;Алгоритм Брезенхема&quot;; </li>
  <li>Ввести через пробел координаты начальной и
    конечных точек отрезка; </li>
  <li>Проанализировать выведенное программой в
    графическом режиме изображение траектории
    развертки, ее характеристики;</li>
  <li>Выполнить пп. 2-4 для альтернативного алгоритма;</li>
  <li>Сравнить качественные характеристики
    траекторий в соответствии с критериями,
    описанными в теоретической части.</li>
</ol>

<p ALIGN="JUSTIFY"><u><a NAME="b5"><font FACE="Arial">Контрольные
вопросы</font></a></u> </p>

<ul>
  <li>Какие требования предъявляются к построению
    отрезков в растровой графике<u><font COLOR="#0000FF"><a
    HREF="#b3">???</a></font></u> </li>
  <li>В чём заключается отличие простого ЦДА от
    симметричного<u><font COLOR="#0000FF"><a HREF="#b7">???</a></font></u> </li>
  <li>Как рассчитывается приращение кoоординaт
    очередной точки в алгоритме симметричного и
    простого ЦДА<a HREF="#b8"><u><font COLOR="#0000FF">???</font></u></a></li>
  <li>Как меняется знак погрешности и как она
    вычисляется в алгоритме БРЕЗЕНХЕМА <a HREF="#b8"><u><font
    COLOR="#0000FF">???</font></u></a></li>
  <li>Какой из исследованных алгоритмов обеспечивает
    наивысшую точность<u><font COLOR="#0000FF"><a HREF="#b3">???</a></font></u></li>
</ul>

<p align="justify"><a NAME="b6"></a><font FACE="Arial"><u>Список
рекомендуемой литературы</u></font></p>

<ul>
  <li><font FACE="Times New Roman">Роджерс Д., Адамс Дж.
    Математические основы машинной графики. -
    Машиностроение, 1980.</font></li>
  <li><font FACE="Times New Roman">Аммерал Л. Машинная графика на
    языке </font>C<font FACE="Times New Roman">. В 4 - х книгах. - Сол
    Систем, 1992</font>.</li>
  <li><font FACE="Times New Roman">Шикин Е. В., Боресков А. В., Зайцев
    А. А. Начала компьютерной графики. - Диалог - МИФИ,
    1993.</font></li>
</ul>

<hr size="1" width="100%" noshade color="gray" align="center">

<p align="center"><a HREF="Введение.HTMl">Введение </a>&nbsp;&nbsp;&nbsp; <a
HREF="lab01.HTMl">1</a>&nbsp;&nbsp;&nbsp; <a HREF="lab02.HTMl">2</a>&nbsp;&nbsp;&nbsp; <a
HREF="lab03.HTMl">3</a>&nbsp;&nbsp;&nbsp;<a HREF="lab04.HTMl"> 4 </a>&nbsp;&nbsp;&nbsp;<a
HREF="lab05.HTMl"> 5</a> &nbsp;&nbsp;&nbsp; <a HREF="lab06.HTMl">6 </a>&nbsp;&nbsp;&nbsp; <a
HREF="lab07.HTMl">7</a>&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp; <a HREF="lab09.HTMl">9</a>&nbsp;&nbsp;&nbsp;
<a HREF="lab10.HTMl">10</a></p>

<hr size="1" width="100%" noshade color="gray" align="center">
</span>
</body>
</html>
